import{S as se,i as le,s as ae,e as p,t as U,k as S,c as h,a as g,h as N,d as u,m as A,b as i,g as k,H as o,j as ie,l as G,J as re,K as oe,n as Q}from"./index-23e304b5.js";import{g as X}from"./navigation-0e6511d1.js";import{g as ne,s as ce,c as ue}from"./index-58473f72-070e370e.js";import{B as fe,a as de,w as me,V as Z,T as pe}from"./fb-032e1bd2.js";function $(m){let e,l,s,t;return{c(){e=p("label"),l=U("Username"),s=S(),t=p("input"),this.h()},l(a){e=h(a,"LABEL",{for:!0,class:!0});var n=g(e);l=N(n,"Username"),n.forEach(u),s=A(a),t=h(a,"INPUT",{id:!0,class:!0,"aria-describedby":!0}),this.h()},h(){i(e,"for","exampleInputEmail1"),i(e,"class","form-label"),i(t,"id","displayName"),i(t,"class","form-control"),i(t,"aria-describedby","emailHelp")},m(a,n){k(a,e,n),o(e,l),k(a,s,n),k(a,t,n)},d(a){a&&u(e),a&&u(s),a&&u(t)}}}function ee(m){let e,l;return{c(){e=p("div"),l=U("Your email will be visible to me. Consider using a throwaway email address since there's no verification."),this.h()},l(s){e=h(s,"DIV",{id:!0,class:!0});var t=g(e);l=N(t,"Your email will be visible to me. Consider using a throwaway email address since there's no verification."),t.forEach(u),this.h()},h(){i(e,"id","emailHelp"),i(e,"class","form-text")},m(s,t){k(s,e,t),o(e,l)},d(s){s&&u(e)}}}function he(m){let e,l,s,t;return{c(){e=p("p"),l=U("Already a user? "),s=p("a"),t=U("Sign In"),this.h()},l(a){e=h(a,"P",{class:!0});var n=g(e);l=N(n,"Already a user? "),s=h(n,"A",{href:!0,class:!0});var w=g(s);t=N(w,"Sign In"),w.forEach(u),n.forEach(u),this.h()},h(){i(s,"href","/login"),i(s,"class","card-link"),i(e,"class","float-end mt-3")},m(a,n){k(a,e,n),o(e,l),o(e,s),o(s,t)},d(a){a&&u(e)}}}function _e(m){let e,l,s,t;return{c(){e=p("p"),l=U("Not a user? "),s=p("a"),t=U("Sign Up"),this.h()},l(a){e=h(a,"P",{class:!0});var n=g(e);l=N(n,"Not a user? "),s=h(n,"A",{href:!0,class:!0});var w=g(s);t=N(w,"Sign Up"),w.forEach(u),n.forEach(u),this.h()},h(){i(s,"href","/signup"),i(s,"class","card-link"),i(e,"class","float-end mt-3")},m(a,n){k(a,e,n),o(e,l),o(e,s),o(s,t)},d(a){a&&u(e)}}}function te(m){let e,l;return{c(){e=p("p"),l=U(m[1]),this.h()},l(s){e=h(s,"P",{class:!0});var t=g(e);l=N(t,m[1]),t.forEach(u),this.h()},h(){i(e,"class","error svelte-toajgc")},m(s,t){k(s,e,t),o(e,l)},p(s,t){t&2&&ie(l,s[1])},d(s){s&&u(e)}}}function be(m){let e,l,s,t,a,n,w,I,C,F,c,b,L,f,E,T,B,O,H,D,V,R,W,y=m[0]!="Login"&&$(),v=m[0]!="Login"&&ee();function Y(r,d){return r[0]=="Login"?_e:he}let j=Y(m),P=j(m),_=m[1]&&te(m);return{c(){e=p("form"),l=p("div"),y&&y.c(),s=S(),t=p("div"),a=p("label"),n=U("Email address"),w=S(),I=p("input"),C=S(),v&&v.c(),F=S(),c=p("div"),b=p("label"),L=U("Password"),f=S(),E=p("input"),T=S(),B=p("button"),O=U("Submit"),H=S(),P.c(),D=S(),_&&_.c(),V=G(),this.h()},l(r){e=h(r,"FORM",{});var d=g(e);l=h(d,"DIV",{class:!0});var J=g(l);y&&y.l(J),J.forEach(u),s=A(d),t=h(d,"DIV",{class:!0});var q=g(t);a=h(q,"LABEL",{for:!0,class:!0});var K=g(a);n=N(K,"Email address"),K.forEach(u),w=A(q),I=h(q,"INPUT",{id:!0,type:!0,class:!0,"aria-describedby":!0}),C=A(q),v&&v.l(q),q.forEach(u),F=A(d),c=h(d,"DIV",{class:!0});var M=g(c);b=h(M,"LABEL",{for:!0,class:!0});var x=g(b);L=N(x,"Password"),x.forEach(u),f=A(M),E=h(M,"INPUT",{id:!0,type:!0,class:!0}),M.forEach(u),T=A(d),B=h(d,"BUTTON",{type:!0,class:!0});var z=g(B);O=N(z,"Submit"),z.forEach(u),d.forEach(u),H=A(r),P.l(r),D=A(r),_&&_.l(r),V=G(),this.h()},h(){i(l,"class","mb-3"),i(a,"for","exampleInputEmail1"),i(a,"class","form-label"),i(I,"id","emailInput"),i(I,"type","email"),i(I,"class","form-control"),i(I,"aria-describedby","emailHelp"),i(t,"class","mb-3"),i(b,"for","exampleInputPassword1"),i(b,"class","form-label"),i(E,"id","passInput"),i(E,"type","password"),i(E,"class","form-control"),i(c,"class","mb-3"),i(B,"type","submit"),i(B,"class","btn btn-primary")},m(r,d){k(r,e,d),o(e,l),y&&y.m(l,null),o(e,s),o(e,t),o(t,a),o(a,n),o(t,w),o(t,I),o(t,C),v&&v.m(t,null),o(e,F),o(e,c),o(c,b),o(b,L),o(c,f),o(c,E),o(e,T),o(e,B),o(B,O),k(r,H,d),P.m(r,d),k(r,D,d),_&&_.m(r,d),k(r,V,d),R||(W=re(e,"submit",oe(m[2])),R=!0)},p(r,[d]){r[0]!="Login"?y||(y=$(),y.c(),y.m(l,null)):y&&(y.d(1),y=null),r[0]!="Login"?v||(v=ee(),v.c(),v.m(t,null)):v&&(v.d(1),v=null),j!==(j=Y(r))&&(P.d(1),P=j(r),P&&(P.c(),P.m(D.parentNode,D))),r[1]?_?_.p(r,d):(_=te(r),_.c(),_.m(V.parentNode,V)):_&&(_.d(1),_=null)},i:Q,o:Q,d(r){r&&u(e),y&&y.d(),v&&v.d(),r&&u(H),P.d(r),r&&u(D),_&&_.d(r),r&&u(V),R=!1,W()}}}function ye(m,e,l){const s=fe();let t,{title:a}=e;const n=ne(de),w=async(c,b,L)=>{try{const f=await pe(Z(c,"users"),{uid:b.uid,backlog:[],displayName:L,favourites:[],played:[],ratings:[],name:L.toLowerCase()});console.log("Document written with ID: ",f.id)}catch(f){console.error("Error adding document: ",f)}};async function I(c){let b=!0;return(await me(Z(s,"users"))).forEach(f=>{f.data().displayName===c&&(b=!1)}),b}I("anwar").then(c=>console.log(c));async function C(c){await I(c)}C("ayaan"),console.log(I("ayaan"));async function F(){let c,b=document.getElementById("emailInput").value,L=document.getElementById("passInput").value;a=="Login"?ce(n,b,L).then(f=>{const E=f.user;localStorage.setItem("uid",E.uid),X("/profile/")}).catch(f=>{f.code==="auth/user-not-found"?l(1,t="Invalid email"):f.code==="auth/wrong-password"?l(1,t="Incorrect Password"):l(1,t=f)}):(c=document.getElementById("displayName").value,console.log(c),I(c).then(f=>{console.log(f),f===!0?ue(n,b,L).then(E=>{const T=E.user;localStorage.setItem("uid",T.uid),c=document.getElementById("displayName").value,w(s,T,c),X("/profile/")}).catch(E=>{E.code==="auth/email-already-in-use"?l(1,t="This email is already registered"):l(1,t=E)}):l(1,t="This name is already in use")}))}return m.$$set=c=>{"title"in c&&l(0,a=c.title)},[a,t,F]}class we extends se{constructor(e){super(),le(this,e,ye,be,ae,{title:0})}}export{we as L};
