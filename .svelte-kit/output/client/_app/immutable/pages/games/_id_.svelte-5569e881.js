import{S as Ze,i as $e,s as et,l as L,g as V,n as pe,d as c,e as h,k as U,t as O,c as _,a as k,m as S,h as A,b as n,H as i,j as Ie,r as H,x as tt,y as st,z as at,p as $,C as lt,q as Pe,f as Re,R as rt,T as ot,U as He,w as nt,o as Be,J as ke,V as it,W as Qe}from"../../chunks/index-23e304b5.js";import"../../chunks/navigation-0e6511d1.js";import{B as ct,a as ut,V as oe,U as ne,K as ie,w as ce,D as be,s as ge}from"../../chunks/fb-032e1bd2.js";/* empty css                                                            */import{R as dt}from"../../chunks/ReviewTest-38a5ebb8.js";import{f as Ye}from"../../chunks/index-fc4bddbf.js";import{g as ft}from"../../chunks/index-58473f72-070e370e.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/StarRating-e512ffd4.js";function Ke(r,e,t){const s=r.slice();return s[24]=e[t],s[26]=t,s}function mt(r,e,t){const s=r.slice();return s[27]=e[t],s[26]=t,s}function pt(r){let e;return{c(){e=h("button"),this.h()},l(t){e=_(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,"aria-label":!0}),k(e).forEach(c),this.h()},h(){n(e,"type","button"),n(e,"data-bs-target","#carouselExampleIndicators"),n(e,"data-bs-slide-to",r[26]),n(e,"aria-label",`Screenshot ${r[26]+1}`)},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function ht(r){let e;return{c(){e=h("button"),this.h()},l(t){e=_(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,class:!0,"aria-current":!0,"aria-label":!0}),k(e).forEach(c),this.h()},h(){n(e,"type","button"),n(e,"data-bs-target","#carouselExampleIndicators"),n(e,"data-bs-slide-to",r[26]),n(e,"class","active"),n(e,"aria-current","true"),n(e,"aria-label",`Screenshot ${r[26]+1}`)},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function _t(r){let e;function t(a,o){return a[26]===0?ht:pt}let l=t(r)(r);return{c(){l.c(),e=L()},l(a){l.l(a),e=L()},m(a,o){l.m(a,o),V(a,e,o)},p:pe,d(a){l.d(a),a&&c(e)}}}function vt(r){let e,t,s,l,a;return{c(){e=h("div"),t=h("img"),a=U(),this.h()},l(o){e=_(o,"DIV",{class:!0});var d=k(e);t=_(d,"IMG",{style:!0,src:!0,alt:!0,class:!0}),a=S(d),d.forEach(c),this.h()},h(){Re(t,"border-radius","0.5rem"),Qe(t.src,s=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${r[24]}.jpg`)||n(t,"src",s),n(t,"alt",l=r[0].name),n(t,"class","d-block w-100 svelte-kssepx"),n(e,"class","carousel-item")},m(o,d){V(o,e,d),i(e,t),i(e,a)},p(o,d){d&1&&l!==(l=o[0].name)&&n(t,"alt",l)},d(o){o&&c(e)}}}function bt(r){let e,t,s,l,a;return{c(){e=h("div"),t=h("img"),a=U(),this.h()},l(o){e=_(o,"DIV",{class:!0});var d=k(e);t=_(d,"IMG",{style:!0,src:!0,alt:!0,class:!0}),a=S(d),d.forEach(c),this.h()},h(){Re(t,"border-radius","0.5rem"),Qe(t.src,s=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${r[24]}.jpg`)||n(t,"src",s),n(t,"alt",l=r[0].name),n(t,"class","d-block w-100 svelte-kssepx"),n(e,"class","carousel-item active")},m(o,d){V(o,e,d),i(e,t),i(e,a)},p(o,d){d&1&&l!==(l=o[0].name)&&n(t,"alt",l)},d(o){o&&c(e)}}}function We(r){let e;function t(a,o){return a[26]===0?bt:vt}let l=t(r)(r);return{c(){l.c(),e=L()},l(a){l.l(a),e=L()},m(a,o){l.m(a,o),V(a,e,o)},p(a,o){l.p(a,o)},d(a){l.d(a),a&&c(e)}}}function Xe(r){let e,t,s,l,a,o,d,I;function M(u,w){return u[2]?gt:kt}let C=M(r),m=C(r);function K(u,w){return u[3]?yt:wt}let q=K(r),x=q(r),y=r[5]&&Je(r);return{c(){e=h("div"),m.c(),t=U(),x.c(),s=U(),l=h("p"),a=O(r[1]),o=U(),y&&y.c(),d=L(),this.h()},l(u){e=_(u,"DIV",{class:!0});var w=k(e);m.l(w),t=S(w),x.l(w),s=S(w),l=_(w,"P",{class:!0});var Y=k(l);a=A(Y,r[1]),Y.forEach(c),w.forEach(c),o=S(u),y&&y.l(u),d=L(),this.h()},h(){n(l,"class","error svelte-kssepx"),n(e,"class","user-options svelte-kssepx")},m(u,w){V(u,e,w),m.m(e,null),i(e,t),x.m(e,null),i(e,s),i(e,l),i(l,a),V(u,o,w),y&&y.m(u,w),V(u,d,w),I=!0},p(u,w){C===(C=M(u))&&m?m.p(u,w):(m.d(1),m=C(u),m&&(m.c(),m.m(e,t))),q===(q=K(u))&&x?x.p(u,w):(x.d(1),x=q(u),x&&(x.c(),x.m(e,s))),(!I||w&2)&&Ie(a,u[1]),u[5]?y?(y.p(u,w),w&32&&H(y,1)):(y=Je(u),y.c(),H(y,1),y.m(d.parentNode,d)):y&&(Be(),$(y,1,1,()=>{y=null}),Pe())},i(u){I||(H(y),I=!0)},o(u){$(y),I=!1},d(u){u&&c(e),m.d(),x.d(),u&&c(o),y&&y.d(u),u&&c(d)}}}function gt(r){let e,t,s,l;return{c(){e=h("button"),t=O("Remove from backlog"),this.h()},l(a){e=_(a,"BUTTON",{type:!0,class:!0});var o=k(e);t=A(o,"Remove from backlog"),o.forEach(c),this.h()},h(){n(e,"type","button"),n(e,"class","btn btn-danger svelte-kssepx")},m(a,o){V(a,e,o),i(e,t),s||(l=ke(e,"click",r[8]),s=!0)},p:pe,d(a){a&&c(e),s=!1,l()}}}function kt(r){let e,t,s,l;return{c(){e=h("button"),t=O("Add to backlog"),this.h()},l(a){e=_(a,"BUTTON",{type:!0,class:!0});var o=k(e);t=A(o,"Add to backlog"),o.forEach(c),this.h()},h(){n(e,"type","button"),n(e,"class","btn btn-primary svelte-kssepx")},m(a,o){V(a,e,o),i(e,t),s||(l=ke(e,"click",r[7]),s=!0)},p:pe,d(a){a&&c(e),s=!1,l()}}}function yt(r){let e,t,s,l;return{c(){e=h("button"),t=O("Remove from favourites"),this.h()},l(a){e=_(a,"BUTTON",{type:!0,class:!0});var o=k(e);t=A(o,"Remove from favourites"),o.forEach(c),this.h()},h(){n(e,"type","button"),n(e,"class","btn btn-danger svelte-kssepx")},m(a,o){V(a,e,o),i(e,t),s||(l=ke(e,"click",r[10]),s=!0)},p:pe,d(a){a&&c(e),s=!1,l()}}}function wt(r){let e,t,s,l;return{c(){e=h("button"),t=O("Add to favourites"),this.h()},l(a){e=_(a,"BUTTON",{type:!0,class:!0});var o=k(e);t=A(o,"Add to favourites"),o.forEach(c),this.h()},h(){n(e,"type","button"),n(e,"class","btn btn-primary svelte-kssepx")},m(a,o){V(a,e,o),i(e,t),s||(l=ke(e,"click",r[9]),s=!0)},p:pe,d(a){a&&c(e),s=!1,l()}}}function Je(r){let e,t,s=r[6]&&Le(r);return{c(){s&&s.c(),e=L()},l(l){s&&s.l(l),e=L()},m(l,a){s&&s.m(l,a),V(l,e,a),t=!0},p(l,a){l[6]?s?(s.p(l,a),a&64&&H(s,1)):(s=Le(l),s.c(),H(s,1),s.m(e.parentNode,e)):s&&(Be(),$(s,1,1,()=>{s=null}),Pe())},i(l){t||(H(s),t=!0)},o(l){$(s),t=!1},d(l){s&&s.d(l),l&&c(e)}}}function Le(r){let e,t;return e=new dt({props:{game:r[0].id,uid:r[5],name:r[6],gamename:r[0].name}}),{c(){tt(e.$$.fragment)},l(s){st(e.$$.fragment,s)},m(s,l){at(e,s,l),t=!0},p(s,l){const a={};l&1&&(a.game=s[0].id),l&32&&(a.uid=s[5]),l&64&&(a.name=s[6]),l&1&&(a.gamename=s[0].name),e.$set(a)},i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){lt(e,s)}}}function Et(r){let e,t,s,l,a,o,d,I,M,C,m,K,q,x,y,u,w,Y,T,v,R=r[0].name+"",G,j,E,g=r[0].summary+"",D,z,p,W,ue,de,ee,te,Q,ye,se,we,Ee,xe,Ne,Ue,ae,Se,qe,De,Te,he,fe,le,Oe=r[12],X=[];for(let f=0;f<Oe.length;f+=1)X[f]=_t(mt(r,Oe,f));let re=r[12],P=[];for(let f=0;f<re.length;f+=1)P[f]=We(Ke(r,re,f));let N=r[4]&&Xe(r);return{c(){e=h("div"),t=h("div"),s=h("div");for(let f=0;f<X.length;f+=1)X[f].c();l=U(),a=h("div");for(let f=0;f<P.length;f+=1)P[f].c();o=U(),d=h("button"),I=h("span"),M=U(),C=h("span"),m=O("Previous"),K=U(),q=h("button"),x=h("span"),y=U(),u=h("span"),w=O("Next"),Y=U(),T=h("div"),v=h("h1"),G=O(R),j=U(),E=h("p"),D=O(g),z=U(),p=h("p"),W=h("span"),ue=O("Developers/Publishers"),de=U(),ee=O(r[11]),te=U(),Q=h("br"),ye=U(),se=h("span"),we=O("Platform(s)"),Ee=U(),xe=O(r[13]),Ne=h("br"),Ue=U(),ae=h("span"),Se=O("Genre(s):"),qe=U(),De=O(r[14]),Te=U(),N&&N.c(),this.h()},l(f){e=_(f,"DIV",{class:!0});var F=k(e);t=_(F,"DIV",{id:!0,class:!0,"data-bs-ride":!0,style:!0});var b=k(t);s=_(b,"DIV",{class:!0});var me=k(s);for(let Z=0;Z<X.length;Z+=1)X[Z].l(me);me.forEach(c),l=S(b),a=_(b,"DIV",{class:!0});var Ae=k(a);for(let Z=0;Z<P.length;Z+=1)P[Z].l(Ae);Ae.forEach(c),o=S(b),d=_(b,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var _e=k(d);I=_(_e,"SPAN",{class:!0,"aria-hidden":!0}),k(I).forEach(c),M=S(_e),C=_(_e,"SPAN",{class:!0});var Ve=k(C);m=A(Ve,"Previous"),Ve.forEach(c),_e.forEach(c),K=S(b),q=_(b,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var ve=k(q);x=_(ve,"SPAN",{class:!0,"aria-hidden":!0}),k(x).forEach(c),y=S(ve),u=_(ve,"SPAN",{class:!0});var Ce=k(u);w=A(Ce,"Next"),Ce.forEach(c),ve.forEach(c),b.forEach(c),Y=S(F),T=_(F,"DIV",{class:!0});var J=k(T);v=_(J,"H1",{class:!0});var Ge=k(v);G=A(Ge,R),Ge.forEach(c),j=S(J),E=_(J,"P",{class:!0});var je=k(E);D=A(je,g),je.forEach(c),z=S(J),p=_(J,"P",{class:!0});var B=k(p);W=_(B,"SPAN",{class:!0});var Fe=k(W);ue=A(Fe,"Developers/Publishers"),Fe.forEach(c),de=S(B),ee=A(B,r[11]),te=S(B),Q=_(B,"BR",{}),ye=S(B),se=_(B,"SPAN",{class:!0});var ze=k(se);we=A(ze,"Platform(s)"),ze.forEach(c),Ee=S(B),xe=A(B,r[13]),Ne=_(B,"BR",{}),Ue=S(B),ae=_(B,"SPAN",{class:!0});var Me=k(ae);Se=A(Me,"Genre(s):"),Me.forEach(c),qe=S(B),De=A(B,r[14]),B.forEach(c),Te=S(J),N&&N.l(J),J.forEach(c),F.forEach(c),this.h()},h(){n(s,"class","carousel-indicators"),n(a,"class","carousel-inner"),n(I,"class","carousel-control-prev-icon svelte-kssepx"),n(I,"aria-hidden","true"),n(C,"class","visually-hidden svelte-kssepx"),n(d,"class","carousel-control-prev"),n(d,"type","button"),n(d,"data-bs-target","#carouselExampleControls"),n(d,"data-bs-slide","prev"),n(x,"class","carousel-control-next-icon svelte-kssepx"),n(x,"aria-hidden","true"),n(u,"class","visually-hidden svelte-kssepx"),n(q,"class","carousel-control-next"),n(q,"type","button"),n(q,"data-bs-target","#carouselExampleControls"),n(q,"data-bs-slide","next"),n(t,"id","carouselExampleControls"),n(t,"class","carousel slide"),n(t,"data-bs-ride","carousel"),Re(t,"border-radius","0.5rem"),n(v,"class","svelte-kssepx"),n(E,"class","overview svelte-kssepx"),n(W,"class","svelte-kssepx"),n(se,"class","svelte-kssepx"),n(ae,"class","svelte-kssepx"),n(p,"class","svelte-kssepx"),n(T,"class","text-container"),n(e,"class","game-info svelte-kssepx")},m(f,F){V(f,e,F),i(e,t),i(t,s);for(let b=0;b<X.length;b+=1)X[b].m(s,null);i(t,l),i(t,a);for(let b=0;b<P.length;b+=1)P[b].m(a,null);i(t,o),i(t,d),i(d,I),i(d,M),i(d,C),i(C,m),i(t,K),i(t,q),i(q,x),i(q,y),i(q,u),i(u,w),i(e,Y),i(e,T),i(T,v),i(v,G),i(T,j),i(T,E),i(E,D),i(T,z),i(T,p),i(p,W),i(W,ue),i(p,de),i(p,ee),i(p,te),i(p,Q),i(p,ye),i(p,se),i(se,we),i(p,Ee),i(p,xe),i(p,Ne),i(p,Ue),i(p,ae),i(ae,Se),i(p,qe),i(p,De),i(T,Te),N&&N.m(T,null),le=!0},p(f,[F]){if(F&4097){re=f[12];let b;for(b=0;b<re.length;b+=1){const me=Ke(f,re,b);P[b]?P[b].p(me,F):(P[b]=We(me),P[b].c(),P[b].m(a,null))}for(;b<P.length;b+=1)P[b].d(1);P.length=re.length}(!le||F&1)&&R!==(R=f[0].name+"")&&Ie(G,R),(!le||F&1)&&g!==(g=f[0].summary+"")&&Ie(D,g),f[4]?N?(N.p(f,F),F&16&&H(N,1)):(N=Xe(f),N.c(),H(N,1),N.m(T,null)):N&&(Be(),$(N,1,1,()=>{N=null}),Pe())},i(f){le||(H(N),rt(()=>{fe&&fe.end(1),he=it(e,Ye,{y:50,duration:400,delay:500}),he.start()}),le=!0)},o(f){$(N),he&&he.invalidate(),fe=ot(e,Ye,{duration:500}),le=!1},d(f){f&&c(e),He(X,f),He(P,f),N&&N.d(),f&&fe&&fe.end()}}}async function Bt({fetch:r,params:e}){return{props:{searchedGame:(await(await r("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, genres.name, platforms.name, release_dates.human, summary,screenshots.image_id, cover.image_id, artworks, involved_companies.company.name; where id = ${e.id};`})).json())[0]}}}function xt(r,e,t){const s=ct(),l=ft(ut);let a="",o,d,I=!1,M,C;l.onAuthStateChanged(function(v){v?(t(4,I=!0),l.currentUser.uid,t(5,M=l.currentUser.displayName)):t(4,I=!1)});let{searchedGame:m}=e;m.id,console.log(m);const K=async()=>{let v=l.currentUser;const R=oe(s,"users");console.log("step 1");let G=ne(R,ie("uid","==",v.uid));console.log("step 2");const j=await ce(G);let E,g;j.forEach(z=>{E=z.id,g=z.data().backlog}),console.log([...g,m.id]);const D=be(s,"users",E);await ge(D,{backlog:[...g,m.id]}),console.log("all done"),t(2,o=!0)},q=async()=>{let v=l.currentUser;const R=oe(s,"users");let G=ne(R,ie("uid","==",v.uid));const j=await ce(G);let E,g;j.forEach(p=>{E=p.id,g=p.data().backlog});const D=g.indexOf(m.id);g.splice(D,1);const z=be(s,"users",E);await ge(z,{backlog:g}),console.log("all done"),t(2,o=!1)},x=async()=>{let v=l.currentUser;const R=oe(s,"users");console.log("step 1");let G=ne(R,ie("uid","==",v.uid));console.log("step 2");const j=await ce(G);let E,g;if(j.forEach(D=>{E=D.id,g=D.data().favourites}),g.length<=3){console.log([...g,m.id]);const D=be(s,"users",E);await ge(D,{favourites:[...g,m.id]}),console.log("all done"),t(3,d=!0)}else t(1,a="You can only favourite 4 games"),setTimeout(()=>{t(1,a=" ")},5e3)},y=async()=>{let v=l.currentUser;const R=oe(s,"users");let G=ne(R,ie("uid","==",v.uid));const j=await ce(G);let E,g;j.forEach(p=>{E=p.id,g=p.data().favourites});const D=g.indexOf(m.id);g.splice(D,1);const z=be(s,"users",E);await ge(z,{favourites:g}),console.log("all done"),t(3,d=!1)};nt(async()=>{l.currentUser,l.onAuthStateChanged(async function(v){if(v){const R=oe(s,"users");let G=ne(R,ie("uid","==",v.uid));const j=await ce(G);let E,g,D;j.forEach(p=>{p.id,E=p.data().backlog,g=p.data().favourites,D=p.data().played}),E.indexOf(m.id)===-1?(console.log("no tin backlog"),t(2,o=!1)):t(2,o=!0),g.indexOf(m.id)===-1?(console.log("no tin backlog"),t(3,d=!1)):t(3,d=!0),D.indexOf(m.id)===-1&&console.log("no tin backlog");async function z(){let p=l.currentUser;if(p){const W=oe(s,"users");let ue=ne(W,ie("uid","==",p.uid));const de=await ce(ue);let ee,te;de.forEach(Q=>{Q.id,ee=Q.data().displayName,te=Q.data().name}),t(5,M=ee),t(6,C=te)}}return z(),E}})});let u=[];m.screenshots[0].image_id;let w=[];for(let v of m.screenshots)w.push(v.image_id);try{for(let v of m.involved_companies)u.push(" "+v.company.name)}catch{u.push("No companies found.")}let Y=[];for(let v of m.platforms)Y.push(" "+v.name);let T=[];try{for(let v of m.genres)T.push(" "+v.name)}catch{T.push("No genres found.")}return r.$$set=v=>{"searchedGame"in v&&t(0,m=v.searchedGame)},[m,a,o,d,I,M,C,K,q,x,y,u,w,Y,T]}class Ot extends Ze{constructor(e){super(),$e(this,e,xt,Et,et,{searchedGame:0})}}export{Ot as default,Bt as load};
