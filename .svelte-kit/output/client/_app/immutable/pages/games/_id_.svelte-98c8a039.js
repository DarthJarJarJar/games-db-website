import{S as Fe,i as ze,s as Le,R as xe,t as j,T as We,a as g,h as F,d as f,b as c,Z as ct,g as U,H as d,J as le,j as pe,n as K,L as Qe,_ as Ke,x as Se,y as Ae,z as Ue,r as L,p as G,C as Be,e as p,c as b,o as ae,q as ie,W as Ce,k as P,m as V,$ as It,l as ee,f as x,a0 as Tt,a1 as Rt,I as je,U as Dt,V as Nt,w as St,X as At,Y as Et}from"../../chunks/index-12679752.js";import"../../chunks/navigation-0e6511d1.js";import{B as Je,a as Ze,V as ne,U as ce,K as ue,w as fe,y as Ut,D as Ie,p as Ne,g as Bt}from"../../chunks/fb-07f3109e.js";/* empty css                                                            */import{f as ut}from"../../chunks/index-124bdde0.js";import{S as qt}from"../../chunks/StarRating-87018281.js";import"../../chunks/singletons-d1fb5791.js";function Ot(a){let e,t,l,s,r,o;return{c(){e=xe("svg"),t=xe("title"),l=j(a[0]),s=xe("path"),this.h()},l(n){e=We(n,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0,"data-starid":!0});var i=g(e);t=We(i,"title",{});var m=g(t);l=F(m,a[0]),m.forEach(f),s=We(i,"path",{"data-starid":!0,class:!0,d:!0}),g(s).forEach(f),i.forEach(f),this.h()},h(){c(s,"data-starid",a[2]),c(s,"class","starPath svelte-1rhz5xd"),c(s,"d","m25,1 6,17h18l-14,11 5,17-15-10-15,10 5-17-14-11h18z"),ct(s,"filled",a[1]),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","20"),c(e,"height","20"),c(e,"viewBox","0 0 51 48"),c(e,"class","star svelte-1rhz5xd"),c(e,"data-starid",a[2])},m(n,i){U(n,e,i),d(e,t),d(t,l),d(e,s),r||(o=[le(e,"mouseover",a[3]),le(e,"mouseleave",a[4]),le(e,"click",a[5])],r=!0)},p(n,[i]){i&1&&pe(l,n[0]),i&4&&c(s,"data-starid",n[2]),i&2&&ct(s,"filled",n[1]),i&4&&c(e,"data-starid",n[2])},i:K,o:K,d(n){n&&f(e),r=!1,Qe(o)}}}function Pt(a,e,t){let{title:l="star"}=e,{filled:s=!1}=e,{starId:r}=e;function o(m){Ke.call(this,a,m)}function n(m){Ke.call(this,a,m)}function i(m){Ke.call(this,a,m)}return a.$$set=m=>{"title"in m&&t(0,l=m.title),"filled"in m&&t(1,s=m.filled),"starId"in m&&t(2,r=m.starId)},[l,s,r,o,n,i]}class Vt extends Fe{constructor(e){super(),ze(this,e,Pt,Ot,Le,{title:0,filled:1,starId:2})}}function ft(a,e,t){const l=a.slice();return l[7]=e[t],l}function dt(a){let e,t;return e=new Vt({props:{filled:a[1]?a[1]>=a[7]:a[0]>=a[7],starId:a[7]}}),e.$on("mouseover",a[2](a[7])),e.$on("mouseleave",a[6]),e.$on("click",a[3](a[7])),{c(){Se(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,s){Ue(e,l,s),t=!0},p(l,s){const r={};s&3&&(r.filled=l[1]?l[1]>=l[7]:l[0]>=l[7]),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){G(e.$$.fragment,l),t=!1},d(l){Be(e,l)}}}function Ct(a){let e,t,l,s=a[4],r=[];for(let n=0;n<s.length;n+=1)r[n]=dt(ft(a,s,n));const o=n=>G(r[n],1,1,()=>{r[n]=null});return{c(){e=p("div"),t=p("span");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var i=g(e);t=b(i,"SPAN",{class:!0});var m=g(t);for(let _=0;_<r.length;_+=1)r[_].l(m);m.forEach(f),i.forEach(f),this.h()},h(){c(t,"class","starContainer svelte-dffvs7"),c(e,"class","feedback svelte-dffvs7")},m(n,i){U(n,e,i),d(e,t);for(let m=0;m<r.length;m+=1)r[m].m(t,null);l=!0},p(n,[i]){if(i&31){s=n[4];let m;for(m=0;m<s.length;m+=1){const _=ft(n,s,m);r[m]?(r[m].p(_,i),L(r[m],1)):(r[m]=dt(_),r[m].c(),L(r[m],1),r[m].m(t,null))}for(ae(),m=s.length;m<r.length;m+=1)o(m);ie()}},i(n){if(!l){for(let i=0;i<s.length;i+=1)L(r[i]);l=!0}},o(n){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)G(r[i]);l=!1},d(n){n&&f(e),Ce(r,n)}}}function jt(a,e,t){let{rating:l=null}=e,{num:s=5}=e,r=null;const o=_=>()=>{t(1,r=_)},n=_=>()=>{t(0,l=_)};let i=Array.from({length:s},(_,v)=>v+1);const m=()=>t(1,r=null);return a.$$set=_=>{"rating"in _&&t(0,l=_.rating),"num"in _&&t(5,s=_.num)},[l,r,o,n,i,s,m]}class Ft extends Fe{constructor(e){super(),ze(this,e,jt,Ct,Le,{rating:0,num:5})}}function mt(a,e,t){const l=a.slice();return l[5]=e[t],l}function ht(a){let e,t,l,s,r;function o(i){a[13](i)}let n={num:"10"};return a[0]!==void 0&&(n.rating=a[0]),e=new Ft({props:n}),Tt.push(()=>Rt(e,"rating",o)),{c(){Se(e.$$.fragment),l=P(),s=p("br")},l(i){Ae(e.$$.fragment,i),l=V(i),s=b(i,"BR",{})},m(i,m){Ue(e,i,m),U(i,l,m),U(i,s,m),r=!0},p(i,m){const _={};!t&&m&1&&(t=!0,_.rating=i[0],It(()=>t=!1)),e.$set(_)},i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){G(e.$$.fragment,i),r=!1},d(i){Be(e,i),i&&f(l),i&&f(s)}}}function zt(a){let e,t,l,s,r,o,n,i,m,_,v,I,y,T,E;e=new qt({props:{rating:parseFloat(a[0]),config:a[6]}});function w(u,h){return u[5]?Gt:Yt}let R=w(a),k=R(a);return{c(){Se(e.$$.fragment),t=P(),k.c(),l=P(),s=p("div"),r=p("button"),o=j("Review submitted!"),n=P(),i=p("button"),m=j("Edit"),_=P(),v=p("button"),I=j("Delete"),this.h()},l(u){Ae(e.$$.fragment,u),t=V(u),k.l(u),l=V(u),s=b(u,"DIV",{class:!0});var h=g(s);r=b(h,"BUTTON",{type:!0,class:!0,style:!0});var C=g(r);o=F(C,"Review submitted!"),C.forEach(f),n=V(h),i=b(h,"BUTTON",{type:!0,class:!0,style:!0});var B=g(i);m=F(B,"Edit"),B.forEach(f),_=V(h),v=b(h,"BUTTON",{type:!0,class:!0,style:!0});var S=g(v);I=F(S,"Delete"),S.forEach(f),h.forEach(f),this.h()},h(){r.disabled=!0,c(r,"type","submit"),c(r,"class","btn btn-success"),x(r,"margin-top","0.5rem"),c(i,"type","submit"),c(i,"class","btn btn-primary"),x(i,"margin-top","0.5rem"),x(i,"margin-left","0.5rem"),c(v,"type","button"),c(v,"class","btn btn-danger"),x(v,"margin-top","0.5rem"),x(v,"margin-left","0.5rem"),c(s,"class","buttons svelte-18qqude")},m(u,h){Ue(e,u,h),U(u,t,h),k.m(u,h),U(u,l,h),U(u,s,h),d(s,r),d(r,o),d(s,n),d(s,i),d(i,m),d(s,_),d(s,v),d(v,I),y=!0,T||(E=[le(r,"click",a[7]),le(i,"click",a[8])],T=!0)},p(u,h){const C={};h&1&&(C.rating=parseFloat(u[0])),e.$set(C),R===(R=w(u))&&k?k.p(u,h):(k.d(1),k=R(u),k&&(k.c(),k.m(l.parentNode,l)))},i(u){y||(L(e.$$.fragment,u),y=!0)},o(u){G(e.$$.fragment,u),y=!1},d(u){Be(e,u),u&&f(t),k.d(u),u&&f(l),u&&f(s),T=!1,Qe(E)}}}function Lt(a){let e,t,l,s,r,o,n,i,m,_,v,I,y,T,E,w,R,k;return{c(){e=p("details"),t=p("summary"),l=j("Include a review?"),s=P(),r=p("textarea"),o=P(),n=p("div"),i=p("div"),m=p("input"),_=P(),v=p("label"),I=j("Spoilers"),T=P(),E=p("button"),w=j("Submit"),this.h()},l(u){e=b(u,"DETAILS",{class:!0});var h=g(e);t=b(h,"SUMMARY",{class:!0});var C=g(t);l=F(C,"Include a review?"),C.forEach(f),s=V(h),r=b(h,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(r).forEach(f),o=V(h),n=b(h,"DIV",{class:!0});var B=g(n);i=b(B,"DIV",{class:!0});var S=g(i);m=b(S,"INPUT",{type:!0,id:!0,name:!0}),_=V(S),v=b(S,"LABEL",{for:!0});var q=g(v);I=F(q,"Spoilers"),q.forEach(f),S.forEach(f),B.forEach(f),h.forEach(f),T=V(u),E=b(u,"BUTTON",{type:!0,class:!0,style:!0});var D=g(E);w=F(D,"Submit"),D.forEach(f),this.h()},h(){c(t,"class","svelte-18qqude"),c(r,"class","form-control"),c(r,"placeholder","Write your review"),c(r,"id","floatingTextarea2"),x(r,"height","150px"),c(m,"type","checkbox"),c(m,"id","spoilers"),c(m,"name","interest"),c(v,"for","music"),c(i,"class","check svelte-18qqude"),c(n,"class","spoilers svelte-18qqude"),e.open=y=!!a[5],c(e,"class","svelte-18qqude"),c(E,"type","submit"),c(E,"class","btn btn-primary"),x(E,"margin-top","0.5rem")},m(u,h){U(u,e,h),d(e,t),d(t,l),d(e,s),d(e,r),je(r,a[5]),d(e,o),d(e,n),d(n,i),d(i,m),m.checked=a[2],d(i,_),d(i,v),d(v,I),U(u,T,h),U(u,E,h),d(E,w),R||(k=[le(r,"input",a[14]),le(m,"change",a[15]),le(E,"click",a[7])],R=!0)},p(u,h){h&32&&je(r,u[5]),h&4&&(m.checked=u[2]),h&32&&y!==(y=!!u[5])&&(e.open=y)},i:K,o:K,d(u){u&&f(e),u&&f(T),u&&f(E),R=!1,Qe(k)}}}function Gt(a){let e,t,l;return{c(){e=p("textarea"),this.h()},l(s){e=b(s,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(e).forEach(f),this.h()},h(){e.disabled=!0,c(e,"class","form-control"),c(e,"placeholder","Leave a comment here"),c(e,"id","floatingTextarea2"),x(e,"height","100px")},m(s,r){U(s,e,r),je(e,a[5]),t||(l=le(e,"input",a[16]),t=!0)},p(s,r){r&32&&je(e,s[5])},d(s){s&&f(e),t=!1,l()}}}function Yt(a){let e,t;return{c(){e=p("p"),t=j("You haven't reviewed this game yet"),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"You haven't reviewed this game yet"),s.forEach(f),this.h()},h(){c(e,"class","svelte-18qqude")},m(l,s){U(l,e,s),d(e,t)},p:K,d(l){l&&f(e)}}}function vt(a){let e,t;return{c(){e=p("p"),t=j("This game does not have any reviews yet."),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"This game does not have any reviews yet."),s.forEach(f),this.h()},h(){c(e,"class","svelte-18qqude")},m(l,s){U(l,e,s),d(e,t)},d(l){l&&f(e)}}}function _t(a){let e,t,l=!a[4]&&pt(a);return{c(){l&&l.c(),e=ee()},l(s){l&&l.l(s),e=ee()},m(s,r){l&&l.m(s,r),U(s,e,r),t=!0},p(s,r){s[4]?l&&(ae(),G(l,1,1,()=>{l=null}),ie()):l?(l.p(s,r),r&16&&L(l,1)):(l=pt(s),l.c(),L(l,1),l.m(e.parentNode,e))},i(s){t||(L(l),t=!0)},o(s){G(l),t=!1},d(s){l&&l.d(s),s&&f(e)}}}function pt(a){let e,t,l=a[3],s=[];for(let o=0;o<l.length;o+=1)s[o]=bt(mt(a,l,o));const r=o=>G(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ee()},l(o){for(let n=0;n<s.length;n+=1)s[n].l(o);e=ee()},m(o,n){for(let i=0;i<s.length;i+=1)s[i].m(o,n);U(o,e,n),t=!0},p(o,n){if(n&72){l=o[3];let i;for(i=0;i<l.length;i+=1){const m=mt(o,l,i);s[i]?(s[i].p(m,n),L(s[i],1)):(s[i]=bt(m),s[i].c(),L(s[i],1),s[i].m(e.parentNode,e))}for(ae(),i=l.length;i<s.length;i+=1)r(i);ie()}},i(o){if(!t){for(let n=0;n<l.length;n+=1)L(s[n]);t=!0}},o(o){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)G(s[n]);t=!1},d(o){Ce(s,o),o&&f(e)}}}function Mt(a){let e,t;return{c(){e=p("p"),t=j("No"),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"No"),s.forEach(f),this.h()},h(){c(e,"class","card-text svelte-18qqude")},m(l,s){U(l,e,s),d(e,t)},p:K,i:K,o:K,d(l){l&&f(e)}}}function Ht(a){let e,t,l,s=a[5].reviewer+"",r,o,n,i,m,_,v=a[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+a[5].reviewTime.getDate()+" "+a[5].reviewTime.getFullYear(),I,y,T,E;i=new qt({props:{rating:parseFloat(a[5].rating),config:a[6]}});function w(u,h){return u[5].spoiler?xt:Xt}let R=w(a),k=R(a);return{c(){e=p("h5"),t=j("Review by "),l=p("a"),r=j(s),n=P(),Se(i.$$.fragment),m=P(),_=p("h6"),I=j(v),y=P(),k.c(),T=ee(),this.h()},l(u){e=b(u,"H5",{class:!0});var h=g(e);t=F(h,"Review by "),l=b(h,"A",{href:!0,class:!0});var C=g(l);r=F(C,s),C.forEach(f),h.forEach(f),n=V(u),Ae(i.$$.fragment,u),m=V(u),_=b(u,"H6",{class:!0});var B=g(_);I=F(B,v),B.forEach(f),y=V(u),k.l(u),T=ee(),this.h()},h(){c(l,"href",o=`/user/home/${a[5].reviewer.toLowerCase()}`),c(l,"class","svelte-18qqude"),c(e,"class","card-title"),c(_,"class","card-subtitle mb-2 text-muted")},m(u,h){U(u,e,h),d(e,t),d(e,l),d(l,r),U(u,n,h),Ue(i,u,h),U(u,m,h),U(u,_,h),d(_,I),U(u,y,h),k.m(u,h),U(u,T,h),E=!0},p(u,h){(!E||h&8)&&s!==(s=u[5].reviewer+"")&&pe(r,s),(!E||h&8&&o!==(o=`/user/home/${u[5].reviewer.toLowerCase()}`))&&c(l,"href",o);const C={};h&8&&(C.rating=parseFloat(u[5].rating)),i.$set(C),(!E||h&8)&&v!==(v=u[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+u[5].reviewTime.getDate()+" "+u[5].reviewTime.getFullYear())&&pe(I,v),R===(R=w(u))&&k?k.p(u,h):(k.d(1),k=R(u),k&&(k.c(),k.m(T.parentNode,T)))},i(u){E||(L(i.$$.fragment,u),E=!0)},o(u){G(i.$$.fragment,u),E=!1},d(u){u&&f(e),u&&f(n),Be(i,u),u&&f(m),u&&f(_),u&&f(y),k.d(u),u&&f(T)}}}function Xt(a){let e,t=a[5].review+"",l;return{c(){e=p("p"),l=j(t),this.h()},l(s){e=b(s,"P",{class:!0});var r=g(e);l=F(r,t),r.forEach(f),this.h()},h(){c(e,"class","card-text svelte-18qqude")},m(s,r){U(s,e,r),d(e,l)},p(s,r){r&8&&t!==(t=s[5].review+"")&&pe(l,t)},d(s){s&&f(e)}}}function xt(a){let e,t,l,s,r,o=a[5].review+"",n;return{c(){e=p("details"),t=p("summary"),l=j("This review has spoilers. Click to see"),s=P(),r=p("p"),n=j(o),this.h()},l(i){e=b(i,"DETAILS",{class:!0});var m=g(e);t=b(m,"SUMMARY",{class:!0});var _=g(t);l=F(_,"This review has spoilers. Click to see"),_.forEach(f),s=V(m),r=b(m,"P",{class:!0});var v=g(r);n=F(v,o),v.forEach(f),m.forEach(f),this.h()},h(){c(t,"class","svelte-18qqude"),c(r,"class","card-text svelte-18qqude"),c(e,"class","svelte-18qqude")},m(i,m){U(i,e,m),d(e,t),d(t,l),d(e,s),d(e,r),d(r,n)},p(i,m){m&8&&o!==(o=i[5].review+"")&&pe(n,o)},d(i){i&&f(e)}}}function bt(a){let e,t,l,s,r,o,n,i;const m=[Ht,Mt],_=[];function v(I,y){return y&8&&(s=null),s==null&&(s=I[5].reviewer.toLowerCase()!=""),s?0:1}return r=v(a,-1),o=_[r]=m[r](a),{c(){e=p("div"),t=p("div"),l=p("div"),o.c(),n=P(),this.h()},l(I){e=b(I,"DIV",{class:!0});var y=g(e);t=b(y,"DIV",{class:!0,style:!0});var T=g(t);l=b(T,"DIV",{class:!0});var E=g(l);o.l(E),E.forEach(f),T.forEach(f),n=V(y),y.forEach(f),this.h()},h(){c(l,"class","card-body"),c(t,"class","card"),x(t,"width","95%"),x(t,"margin-left","auto"),x(t,"margin-right","auto"),c(e,"class","card-body")},m(I,y){U(I,e,y),d(e,t),d(t,l),_[r].m(l,null),d(e,n),i=!0},p(I,y){let T=r;r=v(I,y),r===T?_[r].p(I,y):(ae(),G(_[T],1,1,()=>{_[T]=null}),ie(),o=_[r],o?o.p(I,y):(o=_[r]=m[r](I),o.c()),L(o,1),o.m(l,null))},i(I){i||(L(o),i=!0)},o(I){G(o),i=!1},d(I){I&&f(e),_[r].d()}}}function Wt(a){let e,t,l,s,r,o,n,i,m,_,v,I,y,T,E,w,R,k=!a[1]&&ht(a);const u=[Lt,zt],h=[];function C(q,D){return q[1]?1:0}i=C(a),m=h[i]=u[i](a);let B=a[4]&&vt(),S=a[3]&&_t(a);return{c(){e=p("div"),t=p("div"),l=p("h5"),s=j("Rate and Review"),r=P(),k&&k.c(),o=P(),n=p("div"),m.c(),_=P(),v=p("div"),I=p("div"),y=p("h5"),T=j("User reviews"),E=P(),B&&B.c(),w=P(),S&&S.c(),this.h()},l(q){e=b(q,"DIV",{class:!0,style:!0});var D=g(e);t=b(D,"DIV",{class:!0});var N=g(t);l=b(N,"H5",{class:!0});var Y=g(l);s=F(Y,"Rate and Review"),Y.forEach(f),r=V(N),k&&k.l(N),o=V(N),n=b(N,"DIV",{class:!0});var A=g(n);m.l(A),A.forEach(f),N.forEach(f),D.forEach(f),_=V(q),v=b(q,"DIV",{class:!0,style:!0});var H=g(v);I=b(H,"DIV",{class:!0});var z=g(I);y=b(z,"H5",{class:!0});var M=g(y);T=F(M,"User reviews"),M.forEach(f),E=V(z),B&&B.l(z),w=V(z),S&&S.l(z),z.forEach(f),H.forEach(f),this.h()},h(){c(l,"class","card-title"),c(n,"class","form-floating"),c(t,"class","card-body"),c(e,"class","card"),x(e,"width","100%"),x(e,"margin-top","1rem"),c(y,"class","card-title"),c(I,"class","card-body"),c(v,"class","card"),x(v,"width","100%"),x(v,"margin-top","2rem")},m(q,D){U(q,e,D),d(e,t),d(t,l),d(l,s),d(t,r),k&&k.m(t,null),d(t,o),d(t,n),h[i].m(n,null),U(q,_,D),U(q,v,D),d(v,I),d(I,y),d(y,T),d(I,E),B&&B.m(I,null),d(I,w),S&&S.m(I,null),R=!0},p(q,[D]){q[1]?k&&(ae(),G(k,1,1,()=>{k=null}),ie()):k?(k.p(q,D),D&2&&L(k,1)):(k=ht(q),k.c(),L(k,1),k.m(t,o));let N=i;i=C(q),i===N?h[i].p(q,D):(ae(),G(h[N],1,1,()=>{h[N]=null}),ie(),m=h[i],m?m.p(q,D):(m=h[i]=u[i](q),m.c()),L(m,1),m.m(n,null)),q[4]?B||(B=vt(),B.c(),B.m(I,w)):B&&(B.d(1),B=null),q[3]?S?(S.p(q,D),D&8&&L(S,1)):(S=_t(q),S.c(),L(S,1),S.m(I,null)):S&&(ae(),G(S,1,1,()=>{S=null}),ie())},i(q){R||(L(k),L(m),L(S),R=!0)},o(q){G(k),G(m),G(S),R=!1},d(q){q&&f(e),k&&k.d(),h[i].d(),q&&f(_),q&&f(v),B&&B.d(),S&&S.d()}}}function Kt(a,e,t){let{game:l}=e,{uid:s}=e,{name:r}=e,{gamename:o}=e;console.log(r),console.log(s);const n=l;let i=new Date;const m=Je(Ze);let _,v,I=!1,y=!1;const T={showText:!0};async function E(){_>0&&_<=10?(v||t(5,v=""),t(1,I=!0),await Ut(Ie(m,"games",`${n+s}`),{gameId:n,reviewBy:s,review:v,reviewAt:i.getTime(),rating:_,spoiler:y,reviewerName:s.toLowerCase(),gameName:o}),R(s,n,_),C()):alert("Rating must be between 0 and 5!")}function w(){t(1,I=!1)}async function R(N,Y,A){const H=Je(Ze),z=ne(H,"users");let M=ce(z,ue("displayName","==",N));const de=await fe(M);let oe,J;de.forEach(te=>{oe=te.id,J=te.data().ratings});let ye=!1;for(let te of J)if(te.id===Y){ye=!0;const be={};be.id=Y,be.rating=te.rating;const Te=J.indexOf(be);J.splice(Te,1);const ge={};ge.id=Y,ge.rating=parseInt(A),J.push(ge)}if(!ye){const te={};te.id=Y,te.rating=parseInt(A),J.push(te)}const me=Ie(H,"users",oe);await Ne(me,{ratings:J})}async function k(){const N=ne(m,"games");let Y=ce(N,ue("reviewBy","==",s));const A=await fe(Y);let H=[];A.forEach(z=>{z.id;let M={};M.id=z.data().gameId,M.review=z.data().review,M.rating=z.data().rating,M.spoiler=z.data().spoiler,H.push(M)});for(let z of H)n===z.id&&(t(1,I=!0),t(5,v=z.review),t(2,y=z.spoiler),t(0,_=z.rating))}k();let u,h=!0;async function C(){const N=ne(m,"games");let Y=ce(N,ue("gameId","==",n));const A=await fe(Y);A.empty?t(4,h=!0):t(4,h=!1);let H=[];A.forEach(z=>{z.id;let M={};M.reviewer=z.data().reviewBy,M.review=z.data().review,M.reviewTime=new Date(z.data().reviewAt),M.rating=z.data().rating,M.spoiler=z.data().spoiler,H.push(M)}),t(3,u=H)}C(),C().then(()=>console.log(h));function B(N){_=N,t(0,_)}function S(){v=this.value,t(5,v)}function q(){y=this.checked,t(2,y)}function D(){v=this.value,t(5,v)}return a.$$set=N=>{"game"in N&&t(9,l=N.game),"uid"in N&&t(10,s=N.uid),"name"in N&&t(11,r=N.name),"gamename"in N&&t(12,o=N.gamename)},[_,I,y,u,h,v,T,E,w,l,s,r,o,B,S,q,D]}class Jt extends Fe{constructor(e){super(),ze(this,e,Kt,Wt,Le,{game:9,uid:10,name:11,gamename:12})}}function gt(a,e,t){const l=a.slice();return l[24]=e[t],l[26]=t,l}function Zt(a,e,t){const l=a.slice();return l[27]=e[t],l[26]=t,l}function Qt(a){let e;return{c(){e=p("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,"aria-label":!0}),g(e).forEach(f),this.h()},h(){c(e,"type","button"),c(e,"data-bs-target","#carouselExampleIndicators"),c(e,"data-bs-slide-to",a[26]),c(e,"aria-label",`Screenshot ${a[26]+1}`)},m(t,l){U(t,e,l)},d(t){t&&f(e)}}}function $t(a){let e;return{c(){e=p("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,class:!0,"aria-current":!0,"aria-label":!0}),g(e).forEach(f),this.h()},h(){c(e,"type","button"),c(e,"data-bs-target","#carouselExampleIndicators"),c(e,"data-bs-slide-to",a[26]),c(e,"class","active"),c(e,"aria-current","true"),c(e,"aria-label",`Screenshot ${a[26]+1}`)},m(t,l){U(t,e,l)},d(t){t&&f(e)}}}function el(a){let e;function t(r,o){return r[26]===0?$t:Qt}let s=t(a)(a);return{c(){s.c(),e=ee()},l(r){s.l(r),e=ee()},m(r,o){s.m(r,o),U(r,e,o)},p:K,d(r){s.d(r),r&&f(e)}}}function tl(a){let e,t,l,s,r;return{c(){e=p("div"),t=p("img"),r=P(),this.h()},l(o){e=b(o,"DIV",{class:!0});var n=g(e);t=b(n,"IMG",{style:!0,src:!0,alt:!0,class:!0}),r=V(n),n.forEach(f),this.h()},h(){x(t,"border-radius","0.5rem"),Et(t.src,l=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[24]}.jpg`)||c(t,"src",l),c(t,"alt",s=a[0].name),c(t,"class","d-block w-100 svelte-1s9vexd"),c(e,"class","carousel-item")},m(o,n){U(o,e,n),d(e,t),d(e,r)},p(o,n){n&1&&s!==(s=o[0].name)&&c(t,"alt",s)},d(o){o&&f(e)}}}function ll(a){let e,t,l,s,r;return{c(){e=p("div"),t=p("img"),r=P(),this.h()},l(o){e=b(o,"DIV",{class:!0});var n=g(e);t=b(n,"IMG",{style:!0,src:!0,alt:!0,class:!0}),r=V(n),n.forEach(f),this.h()},h(){x(t,"border-radius","0.5rem"),Et(t.src,l=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[24]}.jpg`)||c(t,"src",l),c(t,"alt",s=a[0].name),c(t,"class","d-block w-100 svelte-1s9vexd"),c(e,"class","carousel-item active")},m(o,n){U(o,e,n),d(e,t),d(e,r)},p(o,n){n&1&&s!==(s=o[0].name)&&c(t,"alt",s)},d(o){o&&f(e)}}}function kt(a){let e;function t(r,o){return r[26]===0?ll:tl}let s=t(a)(a);return{c(){s.c(),e=ee()},l(r){s.l(r),e=ee()},m(r,o){s.m(r,o),U(r,e,o)},p(r,o){s.p(r,o)},d(r){s.d(r),r&&f(e)}}}function sl(a){let e,t,l,s;return{c(){e=p("strong"),t=p("a"),l=j("Sign In"),s=j(" to log, rate, review and more."),this.h()},l(r){e=b(r,"STRONG",{});var o=g(e);t=b(o,"A",{href:!0,class:!0});var n=g(t);l=F(n,"Sign In"),n.forEach(f),s=F(o," to log, rate, review and more."),o.forEach(f),this.h()},h(){c(t,"href","/profile"),c(t,"class","svelte-1s9vexd")},m(r,o){U(r,e,o),d(e,t),d(t,l),d(e,s)},p:K,i:K,o:K,d(r){r&&f(e)}}}function rl(a){let e,t,l,s,r,o,n,i;function m(w,R){return w[2]?al:il}let _=m(a),v=_(a);function I(w,R){return w[3]?ol:nl}let y=I(a),T=y(a),E=a[5]&&yt(a);return{c(){e=p("div"),v.c(),t=P(),T.c(),l=P(),s=p("p"),r=j(a[1]),o=P(),E&&E.c(),n=ee(),this.h()},l(w){e=b(w,"DIV",{class:!0});var R=g(e);v.l(R),t=V(R),T.l(R),l=V(R),s=b(R,"P",{class:!0});var k=g(s);r=F(k,a[1]),k.forEach(f),R.forEach(f),o=V(w),E&&E.l(w),n=ee(),this.h()},h(){c(s,"class","error svelte-1s9vexd"),c(e,"class","user-options svelte-1s9vexd")},m(w,R){U(w,e,R),v.m(e,null),d(e,t),T.m(e,null),d(e,l),d(e,s),d(s,r),U(w,o,R),E&&E.m(w,R),U(w,n,R),i=!0},p(w,R){_===(_=m(w))&&v?v.p(w,R):(v.d(1),v=_(w),v&&(v.c(),v.m(e,t))),y===(y=I(w))&&T?T.p(w,R):(T.d(1),T=y(w),T&&(T.c(),T.m(e,l))),(!i||R&2)&&pe(r,w[1]),w[5]?E?(E.p(w,R),R&32&&L(E,1)):(E=yt(w),E.c(),L(E,1),E.m(n.parentNode,n)):E&&(ae(),G(E,1,1,()=>{E=null}),ie())},i(w){i||(L(E),i=!0)},o(w){G(E),i=!1},d(w){w&&f(e),v.d(),T.d(),w&&f(o),E&&E.d(w),w&&f(n)}}}function al(a){let e,t,l,s;return{c(){e=p("button"),t=j("Remove from backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var o=g(e);t=F(o,"Remove from backlog"),o.forEach(f),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-danger svelte-1s9vexd")},m(r,o){U(r,e,o),d(e,t),l||(s=le(e,"click",a[8]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function il(a){let e,t,l,s;return{c(){e=p("button"),t=j("Add to backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var o=g(e);t=F(o,"Add to backlog"),o.forEach(f),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-primary svelte-1s9vexd")},m(r,o){U(r,e,o),d(e,t),l||(s=le(e,"click",a[7]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function ol(a){let e,t,l,s;return{c(){e=p("button"),t=j("Remove from favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var o=g(e);t=F(o,"Remove from favourites"),o.forEach(f),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-danger svelte-1s9vexd")},m(r,o){U(r,e,o),d(e,t),l||(s=le(e,"click",a[10]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function nl(a){let e,t,l,s;return{c(){e=p("button"),t=j("Add to favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var o=g(e);t=F(o,"Add to favourites"),o.forEach(f),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-primary svelte-1s9vexd")},m(r,o){U(r,e,o),d(e,t),l||(s=le(e,"click",a[9]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function yt(a){let e,t,l=a[6]&&wt(a);return{c(){l&&l.c(),e=ee()},l(s){l&&l.l(s),e=ee()},m(s,r){l&&l.m(s,r),U(s,e,r),t=!0},p(s,r){s[6]?l?(l.p(s,r),r&64&&L(l,1)):(l=wt(s),l.c(),L(l,1),l.m(e.parentNode,e)):l&&(ae(),G(l,1,1,()=>{l=null}),ie())},i(s){t||(L(l),t=!0)},o(s){G(l),t=!1},d(s){l&&l.d(s),s&&f(e)}}}function wt(a){let e,t;return e=new Jt({props:{game:a[0].id,uid:a[5],name:a[6],gamename:a[0].name}}),{c(){Se(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,s){Ue(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.game=l[0].id),s&32&&(r.uid=l[5]),s&64&&(r.name=l[6]),s&1&&(r.gamename=l[0].name),e.$set(r)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){G(e.$$.fragment,l),t=!1},d(l){Be(e,l)}}}function cl(a){let e,t,l,s,r,o,n,i,m,_,v,I,y,T,E,w,R,k,u,h,C=a[0].name+"",B,S,q,D=a[0].summary+"",N,Y,A,H,z,M,de,oe,J,ye,me,te,be,Te,ge,Ge,we,Ye,Me,He,Xe,se,re,Oe,Re,Ee,$e=a[12],he=[];for(let O=0;O<$e.length;O+=1)he[O]=el(Zt(a,$e,O));let qe=a[12],W=[];for(let O=0;O<qe.length;O+=1)W[O]=kt(gt(a,qe,O));const et=[rl,sl],ve=[];function tt(O,$){return O[4]?0:1}return se=tt(a),re=ve[se]=et[se](a),{c(){e=p("div"),t=p("div"),l=p("div");for(let O=0;O<he.length;O+=1)he[O].c();s=P(),r=p("div");for(let O=0;O<W.length;O+=1)W[O].c();o=P(),n=p("button"),i=p("span"),m=P(),_=p("span"),v=j("Previous"),I=P(),y=p("button"),T=p("span"),E=P(),w=p("span"),R=j("Next"),k=P(),u=p("div"),h=p("h1"),B=j(C),S=P(),q=p("p"),N=j(D),Y=P(),A=p("p"),H=p("span"),z=j("Developers/Publishers"),M=P(),de=j(a[11]),oe=P(),J=p("br"),ye=P(),me=p("span"),te=j("Platform(s)"),be=P(),Te=j(a[13]),ge=p("br"),Ge=P(),we=p("span"),Ye=j("Genre(s):"),Me=P(),He=j(a[14]),Xe=P(),re.c(),this.h()},l(O){e=b(O,"DIV",{class:!0});var $=g(e);t=b($,"DIV",{id:!0,class:!0,"data-bs-ride":!0,style:!0});var X=g(t);l=b(X,"DIV",{class:!0});var Z=g(l);for(let ke=0;ke<he.length;ke+=1)he[ke].l(Z);Z.forEach(f),s=V(X),r=b(X,"DIV",{class:!0});var De=g(r);for(let ke=0;ke<W.length;ke+=1)W[ke].l(De);De.forEach(f),o=V(X),n=b(X,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Pe=g(n);i=b(Pe,"SPAN",{class:!0,"aria-hidden":!0}),g(i).forEach(f),m=V(Pe),_=b(Pe,"SPAN",{class:!0});var lt=g(_);v=F(lt,"Previous"),lt.forEach(f),Pe.forEach(f),I=V(X),y=b(X,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Ve=g(y);T=b(Ve,"SPAN",{class:!0,"aria-hidden":!0}),g(T).forEach(f),E=V(Ve),w=b(Ve,"SPAN",{class:!0});var st=g(w);R=F(st,"Next"),st.forEach(f),Ve.forEach(f),X.forEach(f),k=V($),u=b($,"DIV",{class:!0});var _e=g(u);h=b(_e,"H1",{class:!0});var rt=g(h);B=F(rt,C),rt.forEach(f),S=V(_e),q=b(_e,"P",{class:!0});var at=g(q);N=F(at,D),at.forEach(f),Y=V(_e),A=b(_e,"P",{class:!0});var Q=g(A);H=b(Q,"SPAN",{class:!0});var it=g(H);z=F(it,"Developers/Publishers"),it.forEach(f),M=V(Q),de=F(Q,a[11]),oe=V(Q),J=b(Q,"BR",{}),ye=V(Q),me=b(Q,"SPAN",{class:!0});var ot=g(me);te=F(ot,"Platform(s)"),ot.forEach(f),be=V(Q),Te=F(Q,a[13]),ge=b(Q,"BR",{}),Ge=V(Q),we=b(Q,"SPAN",{class:!0});var nt=g(we);Ye=F(nt,"Genre(s):"),nt.forEach(f),Me=V(Q),He=F(Q,a[14]),Q.forEach(f),Xe=V(_e),re.l(_e),_e.forEach(f),$.forEach(f),this.h()},h(){c(l,"class","carousel-indicators"),c(r,"class","carousel-inner"),c(i,"class","carousel-control-prev-icon svelte-1s9vexd"),c(i,"aria-hidden","true"),c(_,"class","visually-hidden svelte-1s9vexd"),c(n,"class","carousel-control-prev"),c(n,"type","button"),c(n,"data-bs-target","#carouselExampleControls"),c(n,"data-bs-slide","prev"),c(T,"class","carousel-control-next-icon svelte-1s9vexd"),c(T,"aria-hidden","true"),c(w,"class","visually-hidden svelte-1s9vexd"),c(y,"class","carousel-control-next"),c(y,"type","button"),c(y,"data-bs-target","#carouselExampleControls"),c(y,"data-bs-slide","next"),c(t,"id","carouselExampleControls"),c(t,"class","carousel slide"),c(t,"data-bs-ride","carousel"),x(t,"border-radius","0.5rem"),c(h,"class","svelte-1s9vexd"),c(q,"class","overview svelte-1s9vexd"),c(H,"class","svelte-1s9vexd"),c(me,"class","svelte-1s9vexd"),c(we,"class","svelte-1s9vexd"),c(A,"class","svelte-1s9vexd"),c(u,"class","text-container"),c(e,"class","game-info svelte-1s9vexd")},m(O,$){U(O,e,$),d(e,t),d(t,l);for(let X=0;X<he.length;X+=1)he[X].m(l,null);d(t,s),d(t,r);for(let X=0;X<W.length;X+=1)W[X].m(r,null);d(t,o),d(t,n),d(n,i),d(n,m),d(n,_),d(_,v),d(t,I),d(t,y),d(y,T),d(y,E),d(y,w),d(w,R),d(e,k),d(e,u),d(u,h),d(h,B),d(u,S),d(u,q),d(q,N),d(u,Y),d(u,A),d(A,H),d(H,z),d(A,M),d(A,de),d(A,oe),d(A,J),d(A,ye),d(A,me),d(me,te),d(A,be),d(A,Te),d(A,ge),d(A,Ge),d(A,we),d(we,Ye),d(A,Me),d(A,He),d(u,Xe),ve[se].m(u,null),Ee=!0},p(O,[$]){if($&4097){qe=O[12];let Z;for(Z=0;Z<qe.length;Z+=1){const De=gt(O,qe,Z);W[Z]?W[Z].p(De,$):(W[Z]=kt(De),W[Z].c(),W[Z].m(r,null))}for(;Z<W.length;Z+=1)W[Z].d(1);W.length=qe.length}(!Ee||$&1)&&C!==(C=O[0].name+"")&&pe(B,C),(!Ee||$&1)&&D!==(D=O[0].summary+"")&&pe(N,D);let X=se;se=tt(O),se===X?ve[se].p(O,$):(ae(),G(ve[X],1,1,()=>{ve[X]=null}),ie(),re=ve[se],re?re.p(O,$):(re=ve[se]=et[se](O),re.c()),L(re,1),re.m(u,null))},i(O){Ee||(L(re),Dt(()=>{Re&&Re.end(1),Oe=At(e,ut,{y:50,duration:400,delay:500}),Oe.start()}),Ee=!0)},o(O){G(re),Oe&&Oe.invalidate(),Re=Nt(e,ut,{duration:500}),Ee=!1},d(O){O&&f(e),Ce(he,O),Ce(W,O),ve[se].d(),O&&Re&&Re.end()}}}async function bl({fetch:a,params:e}){return{props:{searchedGame:(await(await a("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, genres.name, aggregated_rating, platforms.name, platforms.id, release_dates.human, summary,screenshots.image_id, cover.image_id, artworks, involved_companies.company.name; where id = ${e.id};`})).json())[0]}}}function ul(a,e,t){const l=Je(),s=Bt(Ze);let r="",o,n,i=!1,m,_;s.onAuthStateChanged(function(h){h?(t(4,i=!0),s.currentUser.uid,t(5,m=s.currentUser.displayName)):t(4,i=!1)});let{searchedGame:v}=e;v.id,console.log(v);const I=async()=>{let h=s.currentUser;const C=ne(l,"users");console.log("step 1");let B=ce(C,ue("uid","==",h.uid));console.log("step 2");const S=await fe(B);let q,D;S.forEach(Y=>{q=Y.id,D=Y.data().backlog}),console.log([...D,v.id]);const N=Ie(l,"users",q);await Ne(N,{backlog:[...D,v.id]}),console.log("all done"),t(2,o=!0)},y=async()=>{let h=s.currentUser;const C=ne(l,"users");let B=ce(C,ue("uid","==",h.uid));const S=await fe(B);let q,D;S.forEach(A=>{q=A.id,D=A.data().backlog});const N=D.indexOf(v.id);D.splice(N,1);const Y=Ie(l,"users",q);await Ne(Y,{backlog:D}),console.log("all done"),t(2,o=!1)},T=async()=>{let h=s.currentUser;const C=ne(l,"users");console.log("step 1");let B=ce(C,ue("uid","==",h.uid));console.log("step 2");const S=await fe(B);let q,D;if(S.forEach(N=>{q=N.id,D=N.data().favourites}),D.length<=3){console.log([...D,v.id]);const N=Ie(l,"users",q);await Ne(N,{favourites:[...D,v.id]}),console.log("all done"),t(3,n=!0)}else t(1,r="You can only favourite 4 games"),setTimeout(()=>{t(1,r=" ")},5e3)},E=async()=>{let h=s.currentUser;const C=ne(l,"users");let B=ce(C,ue("uid","==",h.uid));const S=await fe(B);let q,D;S.forEach(A=>{q=A.id,D=A.data().favourites});const N=D.indexOf(v.id);D.splice(N,1);const Y=Ie(l,"users",q);await Ne(Y,{favourites:D}),console.log("all done"),t(3,n=!1)};St(async()=>{s.currentUser,s.onAuthStateChanged(async function(h){if(h){const C=ne(l,"users");let B=ce(C,ue("uid","==",h.uid));const S=await fe(B);let q,D,N;S.forEach(A=>{A.id,q=A.data().backlog,D=A.data().favourites,N=A.data().played}),q.indexOf(v.id)===-1?(console.log("no tin backlog"),t(2,o=!1)):t(2,o=!0),D.indexOf(v.id)===-1?(console.log("no tin backlog"),t(3,n=!1)):t(3,n=!0),N.indexOf(v.id)===-1&&console.log("no tin backlog");async function Y(){let A=s.currentUser;if(A){const H=ne(l,"users");let z=ce(H,ue("uid","==",A.uid));const M=await fe(z);let de,oe;M.forEach(J=>{J.id,de=J.data().displayName,oe=J.data().name}),t(5,m=de),t(6,_=oe)}}return Y(),q}})});let w=[];v.screenshots[0].image_id;let R=[];for(let h of v.screenshots)R.push(h.image_id);try{for(let h of v.involved_companies)w.push(" "+h.company.name)}catch{w.push("No companies found.")}let k=[];for(let h of v.platforms)k.push(" "+h.name);let u=[];try{for(let h of v.genres)u.push(" "+h.name)}catch{u.push("No genres found.")}return console.log(v),a.$$set=h=>{"searchedGame"in h&&t(0,v=h.searchedGame)},[v,r,o,n,i,m,_,I,y,T,E,w,R,k,u]}class gl extends Fe{constructor(e){super(),ze(this,e,ul,cl,Le,{searchedGame:0})}}export{gl as default,bl as load};
