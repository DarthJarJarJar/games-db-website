import{S as Ve,i as Ce,s as je,R as Me,t as j,T as He,a as g,h as F,d,b as c,Z as at,g as A,H as m,J as te,j as he,n as se,L as Je,_ as Xe,x as Re,y as De,z as Ne,r as z,p as Y,C as Se,e as _,c as b,o as le,q as re,W as Oe,k as O,m as P,$ as wt,l as x,f as K,a0 as qt,a1 as Et,I as Pe,U as Tt,V as It,w as Rt,X as Dt,Y as kt}from"../../chunks/index-12679752.js";import"../../chunks/navigation-0e6511d1.js";import{B as We,a as Ke,V as ie,U as oe,K as ne,w as ce,y as Nt,D as we,p as Ie,g as St}from"../../chunks/fb-07f3109e.js";/* empty css                                                            */import{f as it}from"../../chunks/index-124bdde0.js";import{S as yt}from"../../chunks/StarRating-87018281.js";import"../../chunks/singletons-d1fb5791.js";function Ut(a){let e,t,s,l,r,n;return{c(){e=Me("svg"),t=Me("title"),s=j(a[0]),l=Me("path"),this.h()},l(o){e=He(o,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0,"data-starid":!0});var i=g(e);t=He(i,"title",{});var f=g(t);s=F(f,a[0]),f.forEach(d),l=He(i,"path",{"data-starid":!0,class:!0,d:!0}),g(l).forEach(d),i.forEach(d),this.h()},h(){c(l,"data-starid",a[2]),c(l,"class","starPath svelte-1rhz5xd"),c(l,"d","m25,1 6,17h18l-14,11 5,17-15-10-15,10 5-17-14-11h18z"),at(l,"filled",a[1]),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","20"),c(e,"height","20"),c(e,"viewBox","0 0 51 48"),c(e,"class","star svelte-1rhz5xd"),c(e,"data-starid",a[2])},m(o,i){A(o,e,i),m(e,t),m(t,s),m(e,l),r||(n=[te(e,"mouseover",a[3]),te(e,"mouseleave",a[4]),te(e,"click",a[5])],r=!0)},p(o,[i]){i&1&&he(s,o[0]),i&4&&c(l,"data-starid",o[2]),i&2&&at(l,"filled",o[1]),i&4&&c(e,"data-starid",o[2])},i:se,o:se,d(o){o&&d(e),r=!1,Je(n)}}}function At(a,e,t){let{title:s="star"}=e,{filled:l=!1}=e,{starId:r}=e;function n(f){Xe.call(this,a,f)}function o(f){Xe.call(this,a,f)}function i(f){Xe.call(this,a,f)}return a.$$set=f=>{"title"in f&&t(0,s=f.title),"filled"in f&&t(1,l=f.filled),"starId"in f&&t(2,r=f.starId)},[s,l,r,n,o,i]}class Bt extends Ve{constructor(e){super(),Ce(this,e,At,Ut,je,{title:0,filled:1,starId:2})}}function ot(a,e,t){const s=a.slice();return s[7]=e[t],s}function nt(a){let e,t;return e=new Bt({props:{filled:a[1]?a[1]>=a[7]:a[0]>=a[7],starId:a[7]}}),e.$on("mouseover",a[2](a[7])),e.$on("mouseleave",a[6]),e.$on("click",a[3](a[7])),{c(){Re(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,l){Ne(e,s,l),t=!0},p(s,l){const r={};l&3&&(r.filled=s[1]?s[1]>=s[7]:s[0]>=s[7]),e.$set(r)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function Ot(a){let e,t,s,l=a[4],r=[];for(let o=0;o<l.length;o+=1)r[o]=nt(ot(a,l,o));const n=o=>Y(r[o],1,1,()=>{r[o]=null});return{c(){e=_("div"),t=_("span");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var i=g(e);t=b(i,"SPAN",{class:!0});var f=g(t);for(let v=0;v<r.length;v+=1)r[v].l(f);f.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","starContainer svelte-dffvs7"),c(e,"class","feedback svelte-dffvs7")},m(o,i){A(o,e,i),m(e,t);for(let f=0;f<r.length;f+=1)r[f].m(t,null);s=!0},p(o,[i]){if(i&31){l=o[4];let f;for(f=0;f<l.length;f+=1){const v=ot(o,l,f);r[f]?(r[f].p(v,i),z(r[f],1)):(r[f]=nt(v),r[f].c(),z(r[f],1),r[f].m(t,null))}for(le(),f=l.length;f<r.length;f+=1)n(f);re()}},i(o){if(!s){for(let i=0;i<l.length;i+=1)z(r[i]);s=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)Y(r[i]);s=!1},d(o){o&&d(e),Oe(r,o)}}}function Pt(a,e,t){let{rating:s=null}=e,{num:l=5}=e,r=null;const n=v=>()=>{t(1,r=v)},o=v=>()=>{t(0,s=v)};let i=Array.from({length:l},(v,p)=>p+1);const f=()=>t(1,r=null);return a.$$set=v=>{"rating"in v&&t(0,s=v.rating),"num"in v&&t(5,l=v.num)},[s,r,n,o,i,l,f]}class Vt extends Ve{constructor(e){super(),Ce(this,e,Pt,Ot,je,{rating:0,num:5})}}function ct(a,e,t){const s=a.slice();return s[5]=e[t],s}function ut(a){let e,t,s,l,r;function n(i){a[13](i)}let o={num:"10"};return a[0]!==void 0&&(o.rating=a[0]),e=new Vt({props:o}),qt.push(()=>Et(e,"rating",n)),{c(){Re(e.$$.fragment),s=O(),l=_("br")},l(i){De(e.$$.fragment,i),s=P(i),l=b(i,"BR",{})},m(i,f){Ne(e,i,f),A(i,s,f),A(i,l,f),r=!0},p(i,f){const v={};!t&&f&1&&(t=!0,v.rating=i[0],wt(()=>t=!1)),e.$set(v)},i(i){r||(z(e.$$.fragment,i),r=!0)},o(i){Y(e.$$.fragment,i),r=!1},d(i){Se(e,i),i&&d(s),i&&d(l)}}}function Ct(a){let e,t,s,l,r,n,o,i,f,v,p,T,y,I,q;e=new yt({props:{rating:parseFloat(a[0]),config:a[6]}});function w(u,h){return u[5]?Ft:zt}let R=w(a),k=R(a);return{c(){Re(e.$$.fragment),t=O(),k.c(),s=O(),l=_("div"),r=_("button"),n=j("Review submitted!"),o=O(),i=_("button"),f=j("Edit"),v=O(),p=_("button"),T=j("Delete"),this.h()},l(u){De(e.$$.fragment,u),t=P(u),k.l(u),s=P(u),l=b(u,"DIV",{class:!0});var h=g(l);r=b(h,"BUTTON",{type:!0,class:!0,style:!0});var V=g(r);n=F(V,"Review submitted!"),V.forEach(d),o=P(h),i=b(h,"BUTTON",{type:!0,class:!0,style:!0});var B=g(i);f=F(B,"Edit"),B.forEach(d),v=P(h),p=b(h,"BUTTON",{type:!0,class:!0,style:!0});var S=g(p);T=F(S,"Delete"),S.forEach(d),h.forEach(d),this.h()},h(){r.disabled=!0,c(r,"type","submit"),c(r,"class","btn btn-success"),K(r,"margin-top","0.5rem"),c(i,"type","submit"),c(i,"class","btn btn-primary"),K(i,"margin-top","0.5rem"),K(i,"margin-left","0.5rem"),c(p,"type","button"),c(p,"class","btn btn-danger"),K(p,"margin-top","0.5rem"),K(p,"margin-left","0.5rem"),c(l,"class","buttons svelte-18qqude")},m(u,h){Ne(e,u,h),A(u,t,h),k.m(u,h),A(u,s,h),A(u,l,h),m(l,r),m(r,n),m(l,o),m(l,i),m(i,f),m(l,v),m(l,p),m(p,T),y=!0,I||(q=[te(r,"click",a[7]),te(i,"click",a[8])],I=!0)},p(u,h){const V={};h&1&&(V.rating=parseFloat(u[0])),e.$set(V),R===(R=w(u))&&k?k.p(u,h):(k.d(1),k=R(u),k&&(k.c(),k.m(s.parentNode,s)))},i(u){y||(z(e.$$.fragment,u),y=!0)},o(u){Y(e.$$.fragment,u),y=!1},d(u){Se(e,u),u&&d(t),k.d(u),u&&d(s),u&&d(l),I=!1,Je(q)}}}function jt(a){let e,t,s,l,r,n,o,i,f,v,p,T,y,I,q,w,R,k;return{c(){e=_("details"),t=_("summary"),s=j("Include a review?"),l=O(),r=_("textarea"),n=O(),o=_("div"),i=_("div"),f=_("input"),v=O(),p=_("label"),T=j("Spoilers"),I=O(),q=_("button"),w=j("Submit"),this.h()},l(u){e=b(u,"DETAILS",{class:!0});var h=g(e);t=b(h,"SUMMARY",{class:!0});var V=g(t);s=F(V,"Include a review?"),V.forEach(d),l=P(h),r=b(h,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(r).forEach(d),n=P(h),o=b(h,"DIV",{class:!0});var B=g(o);i=b(B,"DIV",{class:!0});var S=g(i);f=b(S,"INPUT",{type:!0,id:!0,name:!0}),v=P(S),p=b(S,"LABEL",{for:!0});var E=g(p);T=F(E,"Spoilers"),E.forEach(d),S.forEach(d),B.forEach(d),h.forEach(d),I=P(u),q=b(u,"BUTTON",{type:!0,class:!0,style:!0});var D=g(q);w=F(D,"Submit"),D.forEach(d),this.h()},h(){c(t,"class","svelte-18qqude"),c(r,"class","form-control"),c(r,"placeholder","Write your review"),c(r,"id","floatingTextarea2"),K(r,"height","150px"),c(f,"type","checkbox"),c(f,"id","spoilers"),c(f,"name","interest"),c(p,"for","music"),c(i,"class","check svelte-18qqude"),c(o,"class","spoilers svelte-18qqude"),e.open=y=!!a[5],c(e,"class","svelte-18qqude"),c(q,"type","submit"),c(q,"class","btn btn-primary"),K(q,"margin-top","0.5rem")},m(u,h){A(u,e,h),m(e,t),m(t,s),m(e,l),m(e,r),Pe(r,a[5]),m(e,n),m(e,o),m(o,i),m(i,f),f.checked=a[2],m(i,v),m(i,p),m(p,T),A(u,I,h),A(u,q,h),m(q,w),R||(k=[te(r,"input",a[14]),te(f,"change",a[15]),te(q,"click",a[7])],R=!0)},p(u,h){h&32&&Pe(r,u[5]),h&4&&(f.checked=u[2]),h&32&&y!==(y=!!u[5])&&(e.open=y)},i:se,o:se,d(u){u&&d(e),u&&d(I),u&&d(q),R=!1,Je(k)}}}function Ft(a){let e,t,s;return{c(){e=_("textarea"),this.h()},l(l){e=b(l,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(e).forEach(d),this.h()},h(){e.disabled=!0,c(e,"class","form-control"),c(e,"placeholder","Leave a comment here"),c(e,"id","floatingTextarea2"),K(e,"height","100px")},m(l,r){A(l,e,r),Pe(e,a[5]),t||(s=te(e,"input",a[16]),t=!0)},p(l,r){r&32&&Pe(e,l[5])},d(l){l&&d(e),t=!1,s()}}}function zt(a){let e,t;return{c(){e=_("p"),t=j("You haven't reviewed this game yet"),this.h()},l(s){e=b(s,"P",{class:!0});var l=g(e);t=F(l,"You haven't reviewed this game yet"),l.forEach(d),this.h()},h(){c(e,"class","svelte-18qqude")},m(s,l){A(s,e,l),m(e,t)},p:se,d(s){s&&d(e)}}}function ft(a){let e,t;return{c(){e=_("p"),t=j("This game does not have any reviews yet."),this.h()},l(s){e=b(s,"P",{class:!0});var l=g(e);t=F(l,"This game does not have any reviews yet."),l.forEach(d),this.h()},h(){c(e,"class","svelte-18qqude")},m(s,l){A(s,e,l),m(e,t)},d(s){s&&d(e)}}}function dt(a){let e,t,s=!a[4]&&mt(a);return{c(){s&&s.c(),e=x()},l(l){s&&s.l(l),e=x()},m(l,r){s&&s.m(l,r),A(l,e,r),t=!0},p(l,r){l[4]?s&&(le(),Y(s,1,1,()=>{s=null}),re()):s?(s.p(l,r),r&16&&z(s,1)):(s=mt(l),s.c(),z(s,1),s.m(e.parentNode,e))},i(l){t||(z(s),t=!0)},o(l){Y(s),t=!1},d(l){s&&s.d(l),l&&d(e)}}}function mt(a){let e,t,s=a[3],l=[];for(let n=0;n<s.length;n+=1)l[n]=ht(ct(a,s,n));const r=n=>Y(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=x()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=x()},m(n,o){for(let i=0;i<l.length;i+=1)l[i].m(n,o);A(n,e,o),t=!0},p(n,o){if(o&72){s=n[3];let i;for(i=0;i<s.length;i+=1){const f=ct(n,s,i);l[i]?(l[i].p(f,o),z(l[i],1)):(l[i]=ht(f),l[i].c(),z(l[i],1),l[i].m(e.parentNode,e))}for(le(),i=s.length;i<l.length;i+=1)r(i);re()}},i(n){if(!t){for(let o=0;o<s.length;o+=1)z(l[o]);t=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)Y(l[o]);t=!1},d(n){Oe(l,n),n&&d(e)}}}function Lt(a){let e,t;return{c(){e=_("p"),t=j("No"),this.h()},l(s){e=b(s,"P",{class:!0});var l=g(e);t=F(l,"No"),l.forEach(d),this.h()},h(){c(e,"class","card-text svelte-18qqude")},m(s,l){A(s,e,l),m(e,t)},p:se,i:se,o:se,d(s){s&&d(e)}}}function Gt(a){let e,t,s,l=a[5].reviewer+"",r,n,o,i,f,v,p=a[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+a[5].reviewTime.getDate()+" "+a[5].reviewTime.getFullYear(),T,y,I,q;i=new yt({props:{rating:parseFloat(a[5].rating),config:a[6]}});function w(u,h){return u[5].spoiler?Mt:Yt}let R=w(a),k=R(a);return{c(){e=_("h5"),t=j("Review by "),s=_("a"),r=j(l),o=O(),Re(i.$$.fragment),f=O(),v=_("h6"),T=j(p),y=O(),k.c(),I=x(),this.h()},l(u){e=b(u,"H5",{class:!0});var h=g(e);t=F(h,"Review by "),s=b(h,"A",{href:!0,class:!0});var V=g(s);r=F(V,l),V.forEach(d),h.forEach(d),o=P(u),De(i.$$.fragment,u),f=P(u),v=b(u,"H6",{class:!0});var B=g(v);T=F(B,p),B.forEach(d),y=P(u),k.l(u),I=x(),this.h()},h(){c(s,"href",n=`/user/home/${a[5].reviewer.toLowerCase()}`),c(s,"class","svelte-18qqude"),c(e,"class","card-title"),c(v,"class","card-subtitle mb-2 text-muted")},m(u,h){A(u,e,h),m(e,t),m(e,s),m(s,r),A(u,o,h),Ne(i,u,h),A(u,f,h),A(u,v,h),m(v,T),A(u,y,h),k.m(u,h),A(u,I,h),q=!0},p(u,h){(!q||h&8)&&l!==(l=u[5].reviewer+"")&&he(r,l),(!q||h&8&&n!==(n=`/user/home/${u[5].reviewer.toLowerCase()}`))&&c(s,"href",n);const V={};h&8&&(V.rating=parseFloat(u[5].rating)),i.$set(V),(!q||h&8)&&p!==(p=u[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+u[5].reviewTime.getDate()+" "+u[5].reviewTime.getFullYear())&&he(T,p),R===(R=w(u))&&k?k.p(u,h):(k.d(1),k=R(u),k&&(k.c(),k.m(I.parentNode,I)))},i(u){q||(z(i.$$.fragment,u),q=!0)},o(u){Y(i.$$.fragment,u),q=!1},d(u){u&&d(e),u&&d(o),Se(i,u),u&&d(f),u&&d(v),u&&d(y),k.d(u),u&&d(I)}}}function Yt(a){let e,t=a[5].review+"",s;return{c(){e=_("p"),s=j(t),this.h()},l(l){e=b(l,"P",{class:!0});var r=g(e);s=F(r,t),r.forEach(d),this.h()},h(){c(e,"class","card-text svelte-18qqude")},m(l,r){A(l,e,r),m(e,s)},p(l,r){r&8&&t!==(t=l[5].review+"")&&he(s,t)},d(l){l&&d(e)}}}function Mt(a){let e,t,s,l,r,n=a[5].review+"",o;return{c(){e=_("details"),t=_("summary"),s=j("This review has spoilers. Click to see"),l=O(),r=_("p"),o=j(n),this.h()},l(i){e=b(i,"DETAILS",{class:!0});var f=g(e);t=b(f,"SUMMARY",{class:!0});var v=g(t);s=F(v,"This review has spoilers. Click to see"),v.forEach(d),l=P(f),r=b(f,"P",{class:!0});var p=g(r);o=F(p,n),p.forEach(d),f.forEach(d),this.h()},h(){c(t,"class","svelte-18qqude"),c(r,"class","card-text svelte-18qqude"),c(e,"class","svelte-18qqude")},m(i,f){A(i,e,f),m(e,t),m(t,s),m(e,l),m(e,r),m(r,o)},p(i,f){f&8&&n!==(n=i[5].review+"")&&he(o,n)},d(i){i&&d(e)}}}function ht(a){let e,t,s,l,r,n,o,i;const f=[Gt,Lt],v=[];function p(T,y){return y&8&&(l=null),l==null&&(l=T[5].reviewer.toLowerCase()!=""),l?0:1}return r=p(a,-1),n=v[r]=f[r](a),{c(){e=_("div"),t=_("div"),s=_("div"),n.c(),o=O(),this.h()},l(T){e=b(T,"DIV",{class:!0});var y=g(e);t=b(y,"DIV",{class:!0,style:!0});var I=g(t);s=b(I,"DIV",{class:!0});var q=g(s);n.l(q),q.forEach(d),I.forEach(d),o=P(y),y.forEach(d),this.h()},h(){c(s,"class","card-body"),c(t,"class","card"),K(t,"width","95%"),K(t,"margin-left","auto"),K(t,"margin-right","auto"),c(e,"class","card-body")},m(T,y){A(T,e,y),m(e,t),m(t,s),v[r].m(s,null),m(e,o),i=!0},p(T,y){let I=r;r=p(T,y),r===I?v[r].p(T,y):(le(),Y(v[I],1,1,()=>{v[I]=null}),re(),n=v[r],n?n.p(T,y):(n=v[r]=f[r](T),n.c()),z(n,1),n.m(s,null))},i(T){i||(z(n),i=!0)},o(T){Y(n),i=!1},d(T){T&&d(e),v[r].d()}}}function Ht(a){let e,t,s,l,r,n,o,i,f,v,p,T,y,I,q,w,R,k=!a[1]&&ut(a);const u=[jt,Ct],h=[];function V(E,D){return E[1]?1:0}i=V(a),f=h[i]=u[i](a);let B=a[4]&&ft(),S=a[3]&&dt(a);return{c(){e=_("div"),t=_("div"),s=_("h5"),l=j("Rate and Review"),r=O(),k&&k.c(),n=O(),o=_("div"),f.c(),v=O(),p=_("div"),T=_("div"),y=_("h5"),I=j("User reviews"),q=O(),B&&B.c(),w=O(),S&&S.c(),this.h()},l(E){e=b(E,"DIV",{class:!0,style:!0});var D=g(e);t=b(D,"DIV",{class:!0});var N=g(t);s=b(N,"H5",{class:!0});var M=g(s);l=F(M,"Rate and Review"),M.forEach(d),r=P(N),k&&k.l(N),n=P(N),o=b(N,"DIV",{class:!0});var U=g(o);f.l(U),U.forEach(d),N.forEach(d),D.forEach(d),v=P(E),p=b(E,"DIV",{class:!0,style:!0});var X=g(p);T=b(X,"DIV",{class:!0});var L=g(T);y=b(L,"H5",{class:!0});var H=g(y);I=F(H,"User reviews"),H.forEach(d),q=P(L),B&&B.l(L),w=P(L),S&&S.l(L),L.forEach(d),X.forEach(d),this.h()},h(){c(s,"class","card-title"),c(o,"class","form-floating"),c(t,"class","card-body"),c(e,"class","card"),K(e,"width","100%"),K(e,"margin-top","1rem"),c(y,"class","card-title"),c(T,"class","card-body"),c(p,"class","card"),K(p,"width","100%"),K(p,"margin-top","2rem")},m(E,D){A(E,e,D),m(e,t),m(t,s),m(s,l),m(t,r),k&&k.m(t,null),m(t,n),m(t,o),h[i].m(o,null),A(E,v,D),A(E,p,D),m(p,T),m(T,y),m(y,I),m(T,q),B&&B.m(T,null),m(T,w),S&&S.m(T,null),R=!0},p(E,[D]){E[1]?k&&(le(),Y(k,1,1,()=>{k=null}),re()):k?(k.p(E,D),D&2&&z(k,1)):(k=ut(E),k.c(),z(k,1),k.m(t,n));let N=i;i=V(E),i===N?h[i].p(E,D):(le(),Y(h[N],1,1,()=>{h[N]=null}),re(),f=h[i],f?f.p(E,D):(f=h[i]=u[i](E),f.c()),z(f,1),f.m(o,null)),E[4]?B||(B=ft(),B.c(),B.m(T,w)):B&&(B.d(1),B=null),E[3]?S?(S.p(E,D),D&8&&z(S,1)):(S=dt(E),S.c(),z(S,1),S.m(T,null)):S&&(le(),Y(S,1,1,()=>{S=null}),re())},i(E){R||(z(k),z(f),z(S),R=!0)},o(E){Y(k),Y(f),Y(S),R=!1},d(E){E&&d(e),k&&k.d(),h[i].d(),E&&d(v),E&&d(p),B&&B.d(),S&&S.d()}}}function Xt(a,e,t){let{game:s}=e,{uid:l}=e,{name:r}=e,{gamename:n}=e;console.log(r),console.log(l);const o=s;let i=new Date;const f=We(Ke);let v,p,T=!1,y=!1;const I={showText:!0};async function q(){v>0&&v<=10?(p||t(5,p=""),t(1,T=!0),await Nt(we(f,"games",`${o+l}`),{gameId:o,reviewBy:l,review:p,reviewAt:i.getTime(),rating:v,spoiler:y,reviewerName:l.toLowerCase(),gameName:n}),R(l,o,v),V()):alert("Rating must be between 0 and 5!")}function w(){t(1,T=!1)}async function R(N,M,U){const X=We(Ke),L=ie(X,"users");let H=oe(L,ne("displayName","==",N));const ue=await ce(H);let ae,Z;ue.forEach($=>{ae=$.id,Z=$.data().ratings});let be=!1;for(let $ of Z)if($.id===M){be=!0;const pe={};pe.id=M,pe.rating=$.rating;const qe=Z.indexOf(pe);Z.splice(qe,1);const ve={};ve.id=M,ve.rating=parseInt(U),Z.push(ve)}if(!be){const $={};$.id=M,$.rating=parseInt(U),Z.push($)}const fe=we(X,"users",ae);await Ie(fe,{ratings:Z})}async function k(){const N=ie(f,"games");let M=oe(N,ne("reviewBy","==",l));const U=await ce(M);let X=[];U.forEach(L=>{L.id;let H={};H.id=L.data().gameId,H.review=L.data().review,H.rating=L.data().rating,H.spoiler=L.data().spoiler,X.push(H)});for(let L of X)o===L.id&&(t(1,T=!0),t(5,p=L.review),t(2,y=L.spoiler),t(0,v=L.rating))}k();let u,h=!0;async function V(){const N=ie(f,"games");let M=oe(N,ne("gameId","==",o));const U=await ce(M);U.empty?t(4,h=!0):t(4,h=!1);let X=[];U.forEach(L=>{L.id;let H={};H.reviewer=L.data().reviewBy,H.review=L.data().review,H.reviewTime=new Date(L.data().reviewAt),H.rating=L.data().rating,H.spoiler=L.data().spoiler,X.push(H)}),t(3,u=X)}V(),V().then(()=>console.log(h));function B(N){v=N,t(0,v)}function S(){p=this.value,t(5,p)}function E(){y=this.checked,t(2,y)}function D(){p=this.value,t(5,p)}return a.$$set=N=>{"game"in N&&t(9,s=N.game),"uid"in N&&t(10,l=N.uid),"name"in N&&t(11,r=N.name),"gamename"in N&&t(12,n=N.gamename)},[v,T,y,u,h,p,I,q,w,s,l,r,n,B,S,E,D]}class Wt extends Ve{constructor(e){super(),Ce(this,e,Xt,Ht,je,{game:9,uid:10,name:11,gamename:12})}}function pt(a,e,t){const s=a.slice();return s[24]=e[t],s[26]=t,s}function Kt(a,e,t){const s=a.slice();return s[27]=e[t],s[26]=t,s}function Jt(a){let e;return{c(){e=_("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,"aria-label":!0}),g(e).forEach(d),this.h()},h(){c(e,"type","button"),c(e,"data-bs-target","#carouselExampleIndicators"),c(e,"data-bs-slide-to",a[26]),c(e,"aria-label",`Screenshot ${a[26]+1}`)},m(t,s){A(t,e,s)},d(t){t&&d(e)}}}function Zt(a){let e;return{c(){e=_("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,class:!0,"aria-current":!0,"aria-label":!0}),g(e).forEach(d),this.h()},h(){c(e,"type","button"),c(e,"data-bs-target","#carouselExampleIndicators"),c(e,"data-bs-slide-to",a[26]),c(e,"class","active"),c(e,"aria-current","true"),c(e,"aria-label",`Screenshot ${a[26]+1}`)},m(t,s){A(t,e,s)},d(t){t&&d(e)}}}function Qt(a){let e;function t(r,n){return r[26]===0?Zt:Jt}let l=t(a)(a);return{c(){l.c(),e=x()},l(r){l.l(r),e=x()},m(r,n){l.m(r,n),A(r,e,n)},p:se,d(r){l.d(r),r&&d(e)}}}function xt(a){let e,t,s,l,r;return{c(){e=_("div"),t=_("img"),r=O(),this.h()},l(n){e=b(n,"DIV",{class:!0});var o=g(e);t=b(o,"IMG",{style:!0,src:!0,alt:!0,class:!0}),r=P(o),o.forEach(d),this.h()},h(){K(t,"border-radius","0.5rem"),kt(t.src,s=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[24]}.jpg`)||c(t,"src",s),c(t,"alt",l=a[0].name),c(t,"class","d-block w-100 svelte-kssepx"),c(e,"class","carousel-item")},m(n,o){A(n,e,o),m(e,t),m(e,r)},p(n,o){o&1&&l!==(l=n[0].name)&&c(t,"alt",l)},d(n){n&&d(e)}}}function $t(a){let e,t,s,l,r;return{c(){e=_("div"),t=_("img"),r=O(),this.h()},l(n){e=b(n,"DIV",{class:!0});var o=g(e);t=b(o,"IMG",{style:!0,src:!0,alt:!0,class:!0}),r=P(o),o.forEach(d),this.h()},h(){K(t,"border-radius","0.5rem"),kt(t.src,s=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[24]}.jpg`)||c(t,"src",s),c(t,"alt",l=a[0].name),c(t,"class","d-block w-100 svelte-kssepx"),c(e,"class","carousel-item active")},m(n,o){A(n,e,o),m(e,t),m(e,r)},p(n,o){o&1&&l!==(l=n[0].name)&&c(t,"alt",l)},d(n){n&&d(e)}}}function vt(a){let e;function t(r,n){return r[26]===0?$t:xt}let l=t(a)(a);return{c(){l.c(),e=x()},l(r){l.l(r),e=x()},m(r,n){l.m(r,n),A(r,e,n)},p(r,n){l.p(r,n)},d(r){l.d(r),r&&d(e)}}}function _t(a){let e,t,s,l,r,n,o,i;function f(w,R){return w[2]?es:ts}let v=f(a),p=v(a);function T(w,R){return w[3]?ss:ls}let y=T(a),I=y(a),q=a[5]&&bt(a);return{c(){e=_("div"),p.c(),t=O(),I.c(),s=O(),l=_("p"),r=j(a[1]),n=O(),q&&q.c(),o=x(),this.h()},l(w){e=b(w,"DIV",{class:!0});var R=g(e);p.l(R),t=P(R),I.l(R),s=P(R),l=b(R,"P",{class:!0});var k=g(l);r=F(k,a[1]),k.forEach(d),R.forEach(d),n=P(w),q&&q.l(w),o=x(),this.h()},h(){c(l,"class","error svelte-kssepx"),c(e,"class","user-options svelte-kssepx")},m(w,R){A(w,e,R),p.m(e,null),m(e,t),I.m(e,null),m(e,s),m(e,l),m(l,r),A(w,n,R),q&&q.m(w,R),A(w,o,R),i=!0},p(w,R){v===(v=f(w))&&p?p.p(w,R):(p.d(1),p=v(w),p&&(p.c(),p.m(e,t))),y===(y=T(w))&&I?I.p(w,R):(I.d(1),I=y(w),I&&(I.c(),I.m(e,s))),(!i||R&2)&&he(r,w[1]),w[5]?q?(q.p(w,R),R&32&&z(q,1)):(q=bt(w),q.c(),z(q,1),q.m(o.parentNode,o)):q&&(le(),Y(q,1,1,()=>{q=null}),re())},i(w){i||(z(q),i=!0)},o(w){Y(q),i=!1},d(w){w&&d(e),p.d(),I.d(),w&&d(n),q&&q.d(w),w&&d(o)}}}function es(a){let e,t,s,l;return{c(){e=_("button"),t=j("Remove from backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var n=g(e);t=F(n,"Remove from backlog"),n.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-danger svelte-kssepx")},m(r,n){A(r,e,n),m(e,t),s||(l=te(e,"click",a[8]),s=!0)},p:se,d(r){r&&d(e),s=!1,l()}}}function ts(a){let e,t,s,l;return{c(){e=_("button"),t=j("Add to backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var n=g(e);t=F(n,"Add to backlog"),n.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-primary svelte-kssepx")},m(r,n){A(r,e,n),m(e,t),s||(l=te(e,"click",a[7]),s=!0)},p:se,d(r){r&&d(e),s=!1,l()}}}function ss(a){let e,t,s,l;return{c(){e=_("button"),t=j("Remove from favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var n=g(e);t=F(n,"Remove from favourites"),n.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-danger svelte-kssepx")},m(r,n){A(r,e,n),m(e,t),s||(l=te(e,"click",a[10]),s=!0)},p:se,d(r){r&&d(e),s=!1,l()}}}function ls(a){let e,t,s,l;return{c(){e=_("button"),t=j("Add to favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var n=g(e);t=F(n,"Add to favourites"),n.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-primary svelte-kssepx")},m(r,n){A(r,e,n),m(e,t),s||(l=te(e,"click",a[9]),s=!0)},p:se,d(r){r&&d(e),s=!1,l()}}}function bt(a){let e,t,s=a[6]&&gt(a);return{c(){s&&s.c(),e=x()},l(l){s&&s.l(l),e=x()},m(l,r){s&&s.m(l,r),A(l,e,r),t=!0},p(l,r){l[6]?s?(s.p(l,r),r&64&&z(s,1)):(s=gt(l),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(le(),Y(s,1,1,()=>{s=null}),re())},i(l){t||(z(s),t=!0)},o(l){Y(s),t=!1},d(l){s&&s.d(l),l&&d(e)}}}function gt(a){let e,t;return e=new Wt({props:{game:a[0].id,uid:a[5],name:a[6],gamename:a[0].name}}),{c(){Re(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,l){Ne(e,s,l),t=!0},p(s,l){const r={};l&1&&(r.game=s[0].id),l&32&&(r.uid=s[5]),l&64&&(r.name=s[6]),l&1&&(r.gamename=s[0].name),e.$set(r)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function rs(a){let e,t,s,l,r,n,o,i,f,v,p,T,y,I,q,w,R,k,u,h,V=a[0].name+"",B,S,E,D=a[0].summary+"",N,M,U,X,L,H,ue,ae,Z,be,fe,$,pe,qe,ve,Fe,ge,ze,Le,Ge,Ye,Ue,Ee,ke,Ze=a[12],de=[];for(let C=0;C<Ze.length;C+=1)de[C]=Qt(Kt(a,Ze,C));let ye=a[12],J=[];for(let C=0;C<ye.length;C+=1)J[C]=vt(pt(a,ye,C));let W=a[4]&&_t(a);return{c(){e=_("div"),t=_("div"),s=_("div");for(let C=0;C<de.length;C+=1)de[C].c();l=O(),r=_("div");for(let C=0;C<J.length;C+=1)J[C].c();n=O(),o=_("button"),i=_("span"),f=O(),v=_("span"),p=j("Previous"),T=O(),y=_("button"),I=_("span"),q=O(),w=_("span"),R=j("Next"),k=O(),u=_("div"),h=_("h1"),B=j(V),S=O(),E=_("p"),N=j(D),M=O(),U=_("p"),X=_("span"),L=j("Developers/Publishers"),H=O(),ue=j(a[11]),ae=O(),Z=_("br"),be=O(),fe=_("span"),$=j("Platform(s)"),pe=O(),qe=j(a[13]),ve=_("br"),Fe=O(),ge=_("span"),ze=j("Genre(s):"),Le=O(),Ge=j(a[14]),Ye=O(),W&&W.c(),this.h()},l(C){e=b(C,"DIV",{class:!0});var ee=g(e);t=b(ee,"DIV",{id:!0,class:!0,"data-bs-ride":!0,style:!0});var G=g(t);s=b(G,"DIV",{class:!0});var Te=g(s);for(let _e=0;_e<de.length;_e+=1)de[_e].l(Te);Te.forEach(d),l=P(G),r=b(G,"DIV",{class:!0});var Qe=g(r);for(let _e=0;_e<J.length;_e+=1)J[_e].l(Qe);Qe.forEach(d),n=P(G),o=b(G,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Ae=g(o);i=b(Ae,"SPAN",{class:!0,"aria-hidden":!0}),g(i).forEach(d),f=P(Ae),v=b(Ae,"SPAN",{class:!0});var xe=g(v);p=F(xe,"Previous"),xe.forEach(d),Ae.forEach(d),T=P(G),y=b(G,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Be=g(y);I=b(Be,"SPAN",{class:!0,"aria-hidden":!0}),g(I).forEach(d),q=P(Be),w=b(Be,"SPAN",{class:!0});var $e=g(w);R=F($e,"Next"),$e.forEach(d),Be.forEach(d),G.forEach(d),k=P(ee),u=b(ee,"DIV",{class:!0});var me=g(u);h=b(me,"H1",{class:!0});var et=g(h);B=F(et,V),et.forEach(d),S=P(me),E=b(me,"P",{class:!0});var tt=g(E);N=F(tt,D),tt.forEach(d),M=P(me),U=b(me,"P",{class:!0});var Q=g(U);X=b(Q,"SPAN",{class:!0});var st=g(X);L=F(st,"Developers/Publishers"),st.forEach(d),H=P(Q),ue=F(Q,a[11]),ae=P(Q),Z=b(Q,"BR",{}),be=P(Q),fe=b(Q,"SPAN",{class:!0});var lt=g(fe);$=F(lt,"Platform(s)"),lt.forEach(d),pe=P(Q),qe=F(Q,a[13]),ve=b(Q,"BR",{}),Fe=P(Q),ge=b(Q,"SPAN",{class:!0});var rt=g(ge);ze=F(rt,"Genre(s):"),rt.forEach(d),Le=P(Q),Ge=F(Q,a[14]),Q.forEach(d),Ye=P(me),W&&W.l(me),me.forEach(d),ee.forEach(d),this.h()},h(){c(s,"class","carousel-indicators"),c(r,"class","carousel-inner"),c(i,"class","carousel-control-prev-icon svelte-kssepx"),c(i,"aria-hidden","true"),c(v,"class","visually-hidden svelte-kssepx"),c(o,"class","carousel-control-prev"),c(o,"type","button"),c(o,"data-bs-target","#carouselExampleControls"),c(o,"data-bs-slide","prev"),c(I,"class","carousel-control-next-icon svelte-kssepx"),c(I,"aria-hidden","true"),c(w,"class","visually-hidden svelte-kssepx"),c(y,"class","carousel-control-next"),c(y,"type","button"),c(y,"data-bs-target","#carouselExampleControls"),c(y,"data-bs-slide","next"),c(t,"id","carouselExampleControls"),c(t,"class","carousel slide"),c(t,"data-bs-ride","carousel"),K(t,"border-radius","0.5rem"),c(h,"class","svelte-kssepx"),c(E,"class","overview svelte-kssepx"),c(X,"class","svelte-kssepx"),c(fe,"class","svelte-kssepx"),c(ge,"class","svelte-kssepx"),c(U,"class","svelte-kssepx"),c(u,"class","text-container"),c(e,"class","game-info svelte-kssepx")},m(C,ee){A(C,e,ee),m(e,t),m(t,s);for(let G=0;G<de.length;G+=1)de[G].m(s,null);m(t,l),m(t,r);for(let G=0;G<J.length;G+=1)J[G].m(r,null);m(t,n),m(t,o),m(o,i),m(o,f),m(o,v),m(v,p),m(t,T),m(t,y),m(y,I),m(y,q),m(y,w),m(w,R),m(e,k),m(e,u),m(u,h),m(h,B),m(u,S),m(u,E),m(E,N),m(u,M),m(u,U),m(U,X),m(X,L),m(U,H),m(U,ue),m(U,ae),m(U,Z),m(U,be),m(U,fe),m(fe,$),m(U,pe),m(U,qe),m(U,ve),m(U,Fe),m(U,ge),m(ge,ze),m(U,Le),m(U,Ge),m(u,Ye),W&&W.m(u,null),ke=!0},p(C,[ee]){if(ee&4097){ye=C[12];let G;for(G=0;G<ye.length;G+=1){const Te=pt(C,ye,G);J[G]?J[G].p(Te,ee):(J[G]=vt(Te),J[G].c(),J[G].m(r,null))}for(;G<J.length;G+=1)J[G].d(1);J.length=ye.length}(!ke||ee&1)&&V!==(V=C[0].name+"")&&he(B,V),(!ke||ee&1)&&D!==(D=C[0].summary+"")&&he(N,D),C[4]?W?(W.p(C,ee),ee&16&&z(W,1)):(W=_t(C),W.c(),z(W,1),W.m(u,null)):W&&(le(),Y(W,1,1,()=>{W=null}),re())},i(C){ke||(z(W),Tt(()=>{Ee&&Ee.end(1),Ue=Dt(e,it,{y:50,duration:400,delay:500}),Ue.start()}),ke=!0)},o(C){Y(W),Ue&&Ue.invalidate(),Ee=It(e,it,{duration:500}),ke=!1},d(C){C&&d(e),Oe(de,C),Oe(J,C),W&&W.d(),C&&Ee&&Ee.end()}}}async function ms({fetch:a,params:e}){return{props:{searchedGame:(await(await a("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, genres.name, aggregated_rating, platforms.name, platforms.id, release_dates.human, summary,screenshots.image_id, cover.image_id, artworks, involved_companies.company.name; where id = ${e.id};`})).json())[0]}}}function as(a,e,t){const s=We(),l=St(Ke);let r="",n,o,i=!1,f,v;l.onAuthStateChanged(function(h){h?(t(4,i=!0),l.currentUser.uid,t(5,f=l.currentUser.displayName)):t(4,i=!1)});let{searchedGame:p}=e;p.id,console.log(p);const T=async()=>{let h=l.currentUser;const V=ie(s,"users");console.log("step 1");let B=oe(V,ne("uid","==",h.uid));console.log("step 2");const S=await ce(B);let E,D;S.forEach(M=>{E=M.id,D=M.data().backlog}),console.log([...D,p.id]);const N=we(s,"users",E);await Ie(N,{backlog:[...D,p.id]}),console.log("all done"),t(2,n=!0)},y=async()=>{let h=l.currentUser;const V=ie(s,"users");let B=oe(V,ne("uid","==",h.uid));const S=await ce(B);let E,D;S.forEach(U=>{E=U.id,D=U.data().backlog});const N=D.indexOf(p.id);D.splice(N,1);const M=we(s,"users",E);await Ie(M,{backlog:D}),console.log("all done"),t(2,n=!1)},I=async()=>{let h=l.currentUser;const V=ie(s,"users");console.log("step 1");let B=oe(V,ne("uid","==",h.uid));console.log("step 2");const S=await ce(B);let E,D;if(S.forEach(N=>{E=N.id,D=N.data().favourites}),D.length<=3){console.log([...D,p.id]);const N=we(s,"users",E);await Ie(N,{favourites:[...D,p.id]}),console.log("all done"),t(3,o=!0)}else t(1,r="You can only favourite 4 games"),setTimeout(()=>{t(1,r=" ")},5e3)},q=async()=>{let h=l.currentUser;const V=ie(s,"users");let B=oe(V,ne("uid","==",h.uid));const S=await ce(B);let E,D;S.forEach(U=>{E=U.id,D=U.data().favourites});const N=D.indexOf(p.id);D.splice(N,1);const M=we(s,"users",E);await Ie(M,{favourites:D}),console.log("all done"),t(3,o=!1)};Rt(async()=>{l.currentUser,l.onAuthStateChanged(async function(h){if(h){const V=ie(s,"users");let B=oe(V,ne("uid","==",h.uid));const S=await ce(B);let E,D,N;S.forEach(U=>{U.id,E=U.data().backlog,D=U.data().favourites,N=U.data().played}),E.indexOf(p.id)===-1?(console.log("no tin backlog"),t(2,n=!1)):t(2,n=!0),D.indexOf(p.id)===-1?(console.log("no tin backlog"),t(3,o=!1)):t(3,o=!0),N.indexOf(p.id)===-1&&console.log("no tin backlog");async function M(){let U=l.currentUser;if(U){const X=ie(s,"users");let L=oe(X,ne("uid","==",U.uid));const H=await ce(L);let ue,ae;H.forEach(Z=>{Z.id,ue=Z.data().displayName,ae=Z.data().name}),t(5,f=ue),t(6,v=ae)}}return M(),E}})});let w=[];p.screenshots[0].image_id;let R=[];for(let h of p.screenshots)R.push(h.image_id);try{for(let h of p.involved_companies)w.push(" "+h.company.name)}catch{w.push("No companies found.")}let k=[];for(let h of p.platforms)k.push(" "+h.name);let u=[];try{for(let h of p.genres)u.push(" "+h.name)}catch{u.push("No genres found.")}return console.log(p),a.$$set=h=>{"searchedGame"in h&&t(0,p=h.searchedGame)},[p,r,n,o,i,f,v,T,y,I,q,w,R,k,u]}class hs extends Ve{constructor(e){super(),Ce(this,e,as,rs,je,{searchedGame:0})}}export{hs as default,ms as load};
