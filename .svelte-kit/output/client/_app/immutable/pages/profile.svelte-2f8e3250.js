import{S as ie,i as ce,s as ue,e as v,c as k,a as y,d as f,g as w,p as q,q as A,r as E,U as fe,V as pe,w as he,o as G,X as _e,t as $,h as T,b as _,H as h,n as V,l as W,k as U,m as P,J as M,j as me,L as de,x as ge,y as be,z as ve,C as ke,W as ye}from"../chunks/index-12679752.js";import{g as j}from"../chunks/navigation-0e6511d1.js";import{g as le,a as oe,B as ze,V as xe,U as Ee,K as we,w as Be,b as $e}from"../chunks/fb-07f3109e.js";import{f as se}from"../chunks/index-124bdde0.js";import{P as Te}from"../chunks/PopularGame-abf69d70.js";import"../chunks/singletons-d1fb5791.js";function ae(c,e,t){const l=c.slice();return l[8]=e[t],l}function qe(c){let e,t;return{c(){e=v("h1"),t=$("Loading..."),this.h()},l(l){e=k(l,"H1",{class:!0});var o=y(e);t=T(o,"Loading..."),o.forEach(f),this.h()},h(){_(e,"class","svelte-zzxh2p")},m(l,o){w(l,e,o),h(e,t)},p:V,i:V,o:V,d(l){l&&f(e)}}}function Oe(c){let e,t,l,o,i,s,r,a,m,n,d,B,z,C,D,x,H,b,O,X,L,S,I,F,R,p=c[1]&&re(c);return{c(){e=v("div"),t=v("h1"),l=$("Welcome "),o=$(c[0]),i=U(),s=v("div"),r=v("button"),a=$("Profile"),m=U(),n=v("button"),d=$("Games"),B=U(),z=v("button"),C=$("Backlog"),D=U(),x=v("button"),H=$("Sign Out"),b=U(),O=v("h2"),X=$("Favourites"),L=U(),S=v("div"),p&&p.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var g=y(e);t=k(g,"H1",{class:!0});var K=y(t);l=T(K,"Welcome "),o=T(K,c[0]),K.forEach(f),i=P(g),s=k(g,"DIV",{class:!0});var N=y(s);r=k(N,"BUTTON",{id:!0,type:!0,class:!0});var J=y(r);a=T(J,"Profile"),J.forEach(f),m=P(N),n=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Q=y(n);d=T(Q,"Games"),Q.forEach(f),B=P(N),z=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Y=y(z);C=T(Y,"Backlog"),Y.forEach(f),D=P(N),x=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Z=y(x);H=T(Z,"Sign Out"),Z.forEach(f),N.forEach(f),g.forEach(f),b=P(u),O=k(u,"H2",{});var ee=y(O);X=T(ee,"Favourites"),ee.forEach(f),L=P(u),S=k(u,"DIV",{class:!0});var te=y(S);p&&p.l(te),te.forEach(f),this.h()},h(){_(t,"class","svelte-zzxh2p"),r.disabled=!0,_(r,"id","backlog"),_(r,"type","button"),_(r,"class","btn btn-primary svelte-zzxh2p"),_(n,"id","backlog"),_(n,"type","button"),_(n,"class","btn btn-primary svelte-zzxh2p"),_(z,"id","backlog"),_(z,"type","button"),_(z,"class","btn btn-primary svelte-zzxh2p"),_(x,"id","signout"),_(x,"type","button"),_(x,"class","btn btn-danger svelte-zzxh2p"),_(s,"class","buttons svelte-zzxh2p"),_(e,"class","akd svelte-zzxh2p"),_(S,"class","games svelte-zzxh2p")},m(u,g){w(u,e,g),h(e,t),h(t,l),h(t,o),h(e,i),h(e,s),h(s,r),h(r,a),h(s,m),h(s,n),h(n,d),h(s,B),h(s,z),h(z,C),h(s,D),h(s,x),h(x,H),w(u,b,g),w(u,O,g),h(O,X),w(u,L,g),w(u,S,g),p&&p.m(S,null),I=!0,F||(R=[M(n,"click",c[4]),M(z,"click",c[3]),M(x,"click",c[5])],F=!0)},p(u,g){(!I||g&1)&&me(o,u[0]),u[1]?p?(p.p(u,g),g&2&&E(p,1)):(p=re(u),p.c(),E(p,1),p.m(S,null)):p&&(G(),q(p,1,1,()=>{p=null}),A())},i(u){I||(E(p),I=!0)},o(u){q(p),I=!1},d(u){u&&f(e),u&&f(b),u&&f(O),u&&f(L),u&&f(S),p&&p.d(),F=!1,de(R)}}}function re(c){let e,t,l,o;const i=[Ne,Se],s=[];function r(a,m){return a[2]!=[]?0:1}return e=r(c),t=s[e]=i[e](c),{c(){t.c(),l=W()},l(a){t.l(a),l=W()},m(a,m){s[e].m(a,m),w(a,l,m),o=!0},p(a,m){let n=e;e=r(a),e===n?s[e].p(a,m):(G(),q(s[n],1,1,()=>{s[n]=null}),A(),t=s[e],t?t.p(a,m):(t=s[e]=i[e](a),t.c()),E(t,1),t.m(l.parentNode,l))},i(a){o||(E(t),o=!0)},o(a){q(t),o=!1},d(a){s[e].d(a),a&&f(l)}}}function Se(c){let e,t,l;return{c(){e=v("div"),t=v("p"),l=$("loading..."),this.h()},l(o){e=k(o,"DIV",{class:!0});var i=y(e);t=k(i,"P",{class:!0});var s=y(t);l=T(s,"loading..."),s.forEach(f),i.forEach(f),this.h()},h(){_(t,"class","loading"),_(e,"class","game")},m(o,i){w(o,e,i),h(e,t),h(t,l)},p:V,i:V,o:V,d(o){o&&f(e)}}}function Ne(c){let e,t,l=c[1],o=[];for(let s=0;s<l.length;s+=1)o[s]=ne(ae(c,l,s));const i=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=W()},l(s){for(let r=0;r<o.length;r+=1)o[r].l(s);e=W()},m(s,r){for(let a=0;a<o.length;a+=1)o[a].m(s,r);w(s,e,r),t=!0},p(s,r){if(r&2){l=s[1];let a;for(a=0;a<l.length;a+=1){const m=ae(s,l,a);o[a]?(o[a].p(m,r),E(o[a],1)):(o[a]=ne(m),o[a].c(),E(o[a],1),o[a].m(e.parentNode,e))}for(G(),a=l.length;a<o.length;a+=1)i(a);A()}},i(s){if(!t){for(let r=0;r<l.length;r+=1)E(o[r]);t=!0}},o(s){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)q(o[r]);t=!1},d(s){ye(o,s),s&&f(e)}}}function ne(c){let e,t;return e=new Te({props:{game:c[8]}}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,o){ve(e,l,o),t=!0},p(l,o){const i={};o&2&&(i.game=l[8]),e.$set(i)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){ke(e,l)}}}function Ue(c){let e,t,l,o,i,s;const r=[Oe,qe],a=[];function m(n,d){return n[0]?0:1}return t=m(c),l=a[t]=r[t](c),{c(){e=v("section"),l.c()},l(n){e=k(n,"SECTION",{});var d=y(e);l.l(d),d.forEach(f)},m(n,d){w(n,e,d),a[t].m(e,null),s=!0},p(n,[d]){let B=t;t=m(n),t===B?a[t].p(n,d):(G(),q(a[B],1,1,()=>{a[B]=null}),A(),l=a[t],l?l.p(n,d):(l=a[t]=r[t](n),l.c()),E(l,1),l.m(e,null))},i(n){s||(E(l),fe(()=>{i&&i.end(1),o=_e(e,se,{y:50,duration:400,delay:500}),o.start()}),s=!0)},o(n){q(l),o&&o.invalidate(),i=pe(e,se,{duration:500}),s=!1},d(n){n&&f(e),a[t].d(),n&&i&&i.end()}}}function Pe(c,e,t){const l=le(oe);let o,i,s,r;function a(){j("/testing")}function m(){j("/mygames/")}return he(()=>{const d=le(oe);d.onAuthStateChanged(async function(B){if(B){let z=d.currentUser,C=ze();const D=xe(C,"users");let x=Ee(D,we("uid","==",z.uid));(await Be(x)).forEach(b=>{t(0,o=b.data().displayName),i=b.data().favourites,console.log(b.data())}),j(`/user/home/${o.toLowerCase()}`),t(2,r=i),console.log(r),r!=[]&&await fetch("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, cover.image_id, follows;  where id=(${r});`}).then(b=>b.json()).then(b=>{t(1,s=b);for(let O of b)console.log(O)})}else j("/login")})}),[o,s,r,a,m,async()=>{$e(l).then(()=>{j("/")}).catch(d=>{console.error(d)})}]}class Le extends ie{constructor(e){super(),ce(this,e,Pe,Ue,ue,{})}}export{Le as default};
