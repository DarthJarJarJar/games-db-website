import{S as ie,i as ce,s as ue,e as v,c as k,a as y,d as f,g as w,p as q,q as G,r as E,R as fe,T as pe,w as he,o as R,V as me,t as T,h as $,b as m,H as h,n as V,l as A,k as U,m as P,J as M,j as _e,L as de,x as ge,y as be,z as ve,C as ke,U as ye}from"../chunks/index-23e304b5.js";import{g as j}from"../chunks/navigation-0e6511d1.js";import{g as le,a as ze}from"../chunks/index-58473f72-070e370e.js";import{a as oe,B as xe,V as Ee,U as we,K as Be,w as Te}from"../chunks/fb-032e1bd2.js";import{f as ae}from"../chunks/index-fc4bddbf.js";import{P as $e}from"../chunks/PopularGame-0ba896f5.js";import"../chunks/singletons-d1fb5791.js";function se(c,e,t){const l=c.slice();return l[8]=e[t],l}function qe(c){let e,t;return{c(){e=v("h1"),t=T("Loading..."),this.h()},l(l){e=k(l,"H1",{class:!0});var o=y(e);t=$(o,"Loading..."),o.forEach(f),this.h()},h(){m(e,"class","svelte-zzxh2p")},m(l,o){w(l,e,o),h(e,t)},p:V,i:V,o:V,d(l){l&&f(e)}}}function Oe(c){let e,t,l,o,i,a,r,s,_,n,d,B,z,C,D,x,H,b,O,W,L,S,I,F,X,p=c[1]&&re(c);return{c(){e=v("div"),t=v("h1"),l=T("Welcome "),o=T(c[0]),i=U(),a=v("div"),r=v("button"),s=T("Profile"),_=U(),n=v("button"),d=T("Games"),B=U(),z=v("button"),C=T("Backlog"),D=U(),x=v("button"),H=T("Sign Out"),b=U(),O=v("h2"),W=T("Favourites"),L=U(),S=v("div"),p&&p.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var g=y(e);t=k(g,"H1",{class:!0});var K=y(t);l=$(K,"Welcome "),o=$(K,c[0]),K.forEach(f),i=P(g),a=k(g,"DIV",{class:!0});var N=y(a);r=k(N,"BUTTON",{id:!0,type:!0,class:!0});var J=y(r);s=$(J,"Profile"),J.forEach(f),_=P(N),n=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Q=y(n);d=$(Q,"Games"),Q.forEach(f),B=P(N),z=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Y=y(z);C=$(Y,"Backlog"),Y.forEach(f),D=P(N),x=k(N,"BUTTON",{id:!0,type:!0,class:!0});var Z=y(x);H=$(Z,"Sign Out"),Z.forEach(f),N.forEach(f),g.forEach(f),b=P(u),O=k(u,"H2",{});var ee=y(O);W=$(ee,"Favourites"),ee.forEach(f),L=P(u),S=k(u,"DIV",{class:!0});var te=y(S);p&&p.l(te),te.forEach(f),this.h()},h(){m(t,"class","svelte-zzxh2p"),r.disabled=!0,m(r,"id","backlog"),m(r,"type","button"),m(r,"class","btn btn-primary svelte-zzxh2p"),m(n,"id","backlog"),m(n,"type","button"),m(n,"class","btn btn-primary svelte-zzxh2p"),m(z,"id","backlog"),m(z,"type","button"),m(z,"class","btn btn-primary svelte-zzxh2p"),m(x,"id","signout"),m(x,"type","button"),m(x,"class","btn btn-danger svelte-zzxh2p"),m(a,"class","buttons svelte-zzxh2p"),m(e,"class","akd svelte-zzxh2p"),m(S,"class","games svelte-zzxh2p")},m(u,g){w(u,e,g),h(e,t),h(t,l),h(t,o),h(e,i),h(e,a),h(a,r),h(r,s),h(a,_),h(a,n),h(n,d),h(a,B),h(a,z),h(z,C),h(a,D),h(a,x),h(x,H),w(u,b,g),w(u,O,g),h(O,W),w(u,L,g),w(u,S,g),p&&p.m(S,null),I=!0,F||(X=[M(n,"click",c[4]),M(z,"click",c[3]),M(x,"click",c[5])],F=!0)},p(u,g){(!I||g&1)&&_e(o,u[0]),u[1]?p?(p.p(u,g),g&2&&E(p,1)):(p=re(u),p.c(),E(p,1),p.m(S,null)):p&&(R(),q(p,1,1,()=>{p=null}),G())},i(u){I||(E(p),I=!0)},o(u){q(p),I=!1},d(u){u&&f(e),u&&f(b),u&&f(O),u&&f(L),u&&f(S),p&&p.d(),F=!1,de(X)}}}function re(c){let e,t,l,o;const i=[Ne,Se],a=[];function r(s,_){return s[2]!=[]?0:1}return e=r(c),t=a[e]=i[e](c),{c(){t.c(),l=A()},l(s){t.l(s),l=A()},m(s,_){a[e].m(s,_),w(s,l,_),o=!0},p(s,_){let n=e;e=r(s),e===n?a[e].p(s,_):(R(),q(a[n],1,1,()=>{a[n]=null}),G(),t=a[e],t?t.p(s,_):(t=a[e]=i[e](s),t.c()),E(t,1),t.m(l.parentNode,l))},i(s){o||(E(t),o=!0)},o(s){q(t),o=!1},d(s){a[e].d(s),s&&f(l)}}}function Se(c){let e,t,l;return{c(){e=v("div"),t=v("p"),l=T("loading..."),this.h()},l(o){e=k(o,"DIV",{class:!0});var i=y(e);t=k(i,"P",{class:!0});var a=y(t);l=$(a,"loading..."),a.forEach(f),i.forEach(f),this.h()},h(){m(t,"class","loading"),m(e,"class","game")},m(o,i){w(o,e,i),h(e,t),h(t,l)},p:V,i:V,o:V,d(o){o&&f(e)}}}function Ne(c){let e,t,l=c[1],o=[];for(let a=0;a<l.length;a+=1)o[a]=ne(se(c,l,a));const i=a=>q(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=A()},l(a){for(let r=0;r<o.length;r+=1)o[r].l(a);e=A()},m(a,r){for(let s=0;s<o.length;s+=1)o[s].m(a,r);w(a,e,r),t=!0},p(a,r){if(r&2){l=a[1];let s;for(s=0;s<l.length;s+=1){const _=se(a,l,s);o[s]?(o[s].p(_,r),E(o[s],1)):(o[s]=ne(_),o[s].c(),E(o[s],1),o[s].m(e.parentNode,e))}for(R(),s=l.length;s<o.length;s+=1)i(s);G()}},i(a){if(!t){for(let r=0;r<l.length;r+=1)E(o[r]);t=!0}},o(a){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)q(o[r]);t=!1},d(a){ye(o,a),a&&f(e)}}}function ne(c){let e,t;return e=new $e({props:{game:c[8]}}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,o){ve(e,l,o),t=!0},p(l,o){const i={};o&2&&(i.game=l[8]),e.$set(i)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){ke(e,l)}}}function Ue(c){let e,t,l,o,i,a;const r=[Oe,qe],s=[];function _(n,d){return n[0]?0:1}return t=_(c),l=s[t]=r[t](c),{c(){e=v("section"),l.c()},l(n){e=k(n,"SECTION",{});var d=y(e);l.l(d),d.forEach(f)},m(n,d){w(n,e,d),s[t].m(e,null),a=!0},p(n,[d]){let B=t;t=_(n),t===B?s[t].p(n,d):(R(),q(s[B],1,1,()=>{s[B]=null}),G(),l=s[t],l?l.p(n,d):(l=s[t]=r[t](n),l.c()),E(l,1),l.m(e,null))},i(n){a||(E(l),fe(()=>{i&&i.end(1),o=me(e,ae,{y:50,duration:400,delay:500}),o.start()}),a=!0)},o(n){q(l),o&&o.invalidate(),i=pe(e,ae,{duration:500}),a=!1},d(n){n&&f(e),s[t].d(),n&&i&&i.end()}}}function Pe(c,e,t){const l=le(oe);let o,i,a,r;function s(){j("/testing")}function _(){j("/mygames/")}return he(()=>{const d=le(oe);d.onAuthStateChanged(async function(B){if(B){let z=d.currentUser,C=xe();const D=Ee(C,"users");let x=we(D,Be("uid","==",z.uid));(await Te(x)).forEach(b=>{t(0,o=b.data().displayName),i=b.data().favourites,console.log(b.data())}),j(`/user/home/${o.toLowerCase()}`),t(2,r=i),console.log(r),r!=[]&&await fetch("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, cover.image_id, follows;  where id=(${r});`}).then(b=>b.json()).then(b=>{t(1,a=b);for(let O of b)console.log(O)})}else j("/login")})}),[o,a,r,s,_,async()=>{ze(l).then(()=>{j("/")}).catch(d=>{console.error(d)})}]}class Ae extends ie{constructor(e){super(),ce(this,e,Pe,Ue,ue,{})}}export{Ae as default};
