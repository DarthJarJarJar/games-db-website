import{S,i as C,s as D,x as E,y as j,z as G,r as g,p as w,C as H,e as b,t as I,k as M,c as x,a as y,h as B,d,m as O,b as $,g as V,H as _,q as X,R as A,T as L,U as N,o as U,V as W}from"../chunks/index-23e304b5.js";import{f as R}from"../chunks/index-fc4bddbf.js";import"../chunks/navigation-0e6511d1.js";import{P as F}from"../chunks/PopularGame-0ba896f5.js";import"../chunks/singletons-d1fb5791.js";function k(i,e,l){const a=i.slice();return a[2]=e[l],a}function q(i){let e,l;return e=new F({props:{game:i[2]}}),{c(){E(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,n){G(e,a,n),l=!0},p(a,n){const c={};n&1&&(c.game=a[2]),e.$set(c)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){H(e,a)}}}function J(i){let e,l,a,n,c,h,m,p,u=i[0],s=[];for(let t=0;t<u.length;t+=1)s[t]=q(k(i,u,t));const P=t=>w(s[t],1,1,()=>{s[t]=null});return{c(){e=b("section"),l=b("h2"),a=I("Popular Games"),n=M(),c=b("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=x(t,"SECTION",{});var o=y(e);l=x(o,"H2",{class:!0});var r=y(l);a=B(r,"Popular Games"),r.forEach(d),n=O(o),c=x(o,"DIV",{class:!0});var f=y(c);for(let v=0;v<s.length;v+=1)s[v].l(f);f.forEach(d),o.forEach(d),this.h()},h(){$(l,"class","svelte-abfciu"),$(c,"class","games svelte-abfciu")},m(t,o){V(t,e,o),_(e,l),_(l,a),_(e,n),_(e,c);for(let r=0;r<s.length;r+=1)s[r].m(c,null);p=!0},p(t,[o]){if(o&1){u=t[0];let r;for(r=0;r<u.length;r+=1){const f=k(t,u,r);s[r]?(s[r].p(f,o),g(s[r],1)):(s[r]=q(f),s[r].c(),g(s[r],1),s[r].m(c,null))}for(U(),r=u.length;r<s.length;r+=1)P(r);X()}},i(t){if(!p){for(let o=0;o<u.length;o+=1)g(s[o]);A(()=>{m&&m.end(1),h=W(e,R,{y:50,duration:400,delay:500}),h.start()}),p=!0}},o(t){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)w(s[o]);h&&h.invalidate(),m=L(e,R,{duration:500}),p=!1},d(t){t&&d(e),N(s,t),t&&m&&m.end()}}}const T=new Date;let z=T.getTime()-157788e5;console.log(z);async function ae({fetch:i,params:e}){return{props:{searchResults:await(await i("https://powerful-fjord-21607.herokuapp.com/https://api.igdb.com/v4/games/",{method:"POST",headers:{"Client-ID":"o5xvtlqq670n8hhzz05rvwpbr7hjt4",Authorization:"Bearer sd089a9azgftad7tbbaroxitu6x71k","X-Requested-With":"XMLHttpRequest"},body:`fields name, cover.image_id, follows; sort follows desc; where follows != null & first_release_date>${Math.floor(z/1e3)} & first_release_date<${Math.floor(T.getTime()/1e3)};`})).json()}}}function K(i,e,l){let{searchResults:a}=e;for(let n of a)console.log(n);return i.$$set=n=>{"searchResults"in n&&l(0,a=n.searchResults)},[a]}class se extends S{constructor(e){super(),C(this,e,K,J,D,{searchResults:0})}}export{se as default,ae as load};
