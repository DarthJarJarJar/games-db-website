import{S as Fe,i as Le,s as Ge,R as Xe,q as C,T as Ke,m as g,r as F,h as f,n as u,U as ut,b as A,C as _,E as te,u as Te,A as K,G as $e,V as We,k as v,l as b,f as M,g as ne,d as ie,t as H,O as Ve,v as De,w as Se,x as Ae,y as Ue,a as O,c as P,p as X,W as It,X as qt,Y as Rt,e as x,D as Ce,M as Nt,N as Dt,o as St,P as At,Q as Et}from"../../../../chunks/index-4fb290ec.js";import"../../../../chunks/navigation-417ed16c.js";import{U as Je,a as Ze,D as ue,K as ce,Q as fe,g as de,I as Ut,x as Ee,T as Ne}from"../../../../chunks/fb-599afce9.js";/* empty css                                                                  */import{S as Tt}from"../../../../chunks/StarRating-35967b67.js";import{f as ct}from"../../../../chunks/index-6273de8d.js";import{g as jt}from"../../../../chunks/index-90ebcfae-1d2b0ced.js";import"../../../../chunks/index.esm2017-57c490d6.js";import"../../../../chunks/singletons-5dc88023.js";import"../../../../chunks/index.esm-e3c7d839.js";function Ot(a){let e,t,l,s,r,i;return{c(){e=Xe("svg"),t=Xe("title"),l=C(a[0]),s=Xe("path"),this.h()},l(o){e=Ke(o,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0,"data-starid":!0});var n=g(e);t=Ke(n,"title",{});var c=g(t);l=F(c,a[0]),c.forEach(f),s=Ke(n,"path",{"data-starid":!0,class:!0,d:!0}),g(s).forEach(f),n.forEach(f),this.h()},h(){u(s,"data-starid",a[2]),u(s,"class","starPath svelte-1rhz5xd"),u(s,"d","m25,1 6,17h18l-14,11 5,17-15-10-15,10 5-17-14-11h18z"),ut(s,"filled",a[1]),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"width","20"),u(e,"height","20"),u(e,"viewBox","0 0 51 48"),u(e,"class","star svelte-1rhz5xd"),u(e,"data-starid",a[2])},m(o,n){A(o,e,n),_(e,t),_(t,l),_(e,s),r||(i=[te(e,"mouseover",a[3]),te(e,"mouseleave",a[4]),te(e,"click",a[5])],r=!0)},p(o,[n]){n&1&&Te(l,o[0]),n&4&&u(s,"data-starid",o[2]),n&2&&ut(s,"filled",o[1]),n&4&&u(e,"data-starid",o[2])},i:K,o:K,d(o){o&&f(e),r=!1,$e(i)}}}function Pt(a,e,t){let{title:l="star"}=e,{filled:s=!1}=e,{starId:r}=e;function i(c){We.call(this,a,c)}function o(c){We.call(this,a,c)}function n(c){We.call(this,a,c)}return a.$$set=c=>{"title"in c&&t(0,l=c.title),"filled"in c&&t(1,s=c.filled),"starId"in c&&t(2,r=c.starId)},[l,s,r,i,o,n]}class Bt extends Fe{constructor(e){super(),Le(this,e,Pt,Ot,Ge,{title:0,filled:1,starId:2})}}function ft(a,e,t){const l=a.slice();return l[7]=e[t],l}function dt(a){let e,t;return e=new Bt({props:{filled:a[1]?a[1]>=a[7]:a[0]>=a[7],starId:a[7]}}),e.$on("mouseover",a[2](a[7])),e.$on("mouseleave",a[6]),e.$on("click",a[3](a[7])),{c(){De(e.$$.fragment)},l(l){Se(e.$$.fragment,l)},m(l,s){Ae(e,l,s),t=!0},p(l,s){const r={};s&3&&(r.filled=l[1]?l[1]>=l[7]:l[0]>=l[7]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){Ue(e,l)}}}function Vt(a){let e,t,l,s=a[4],r=[];for(let o=0;o<s.length;o+=1)r[o]=dt(ft(a,s,o));const i=o=>H(r[o],1,1,()=>{r[o]=null});return{c(){e=v("div"),t=v("span");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var n=g(e);t=b(n,"SPAN",{class:!0});var c=g(t);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(f),n.forEach(f),this.h()},h(){u(t,"class","starContainer svelte-dffvs7"),u(e,"class","feedback svelte-dffvs7")},m(o,n){A(o,e,n),_(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);l=!0},p(o,[n]){if(n&31){s=o[4];let c;for(c=0;c<s.length;c+=1){const h=ft(o,s,c);r[c]?(r[c].p(h,n),M(r[c],1)):(r[c]=dt(h),r[c].c(),M(r[c],1),r[c].m(t,null))}for(ne(),c=s.length;c<r.length;c+=1)i(c);ie()}},i(o){if(!l){for(let n=0;n<s.length;n+=1)M(r[n]);l=!0}},o(o){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)H(r[n]);l=!1},d(o){o&&f(e),Ve(r,o)}}}function Ct(a,e,t){let{rating:l=null}=e,{num:s=5}=e,r=null;const i=h=>()=>{t(1,r=h)},o=h=>()=>{t(0,l=h)};let n=Array.from({length:s},(h,p)=>p+1);const c=()=>t(1,r=null);return a.$$set=h=>{"rating"in h&&t(0,l=h.rating),"num"in h&&t(5,s=h.num)},[l,r,i,o,n,s,c]}class Ft extends Fe{constructor(e){super(),Le(this,e,Ct,Vt,Ge,{rating:0,num:5})}}function _t(a,e,t){const l=a.slice();return l[5]=e[t],l}function ht(a){let e,t,l,s,r;function i(n){a[13](n)}let o={num:"10"};return a[0]!==void 0&&(o.rating=a[0]),e=new Ft({props:o}),It.push(()=>qt(e,"rating",i)),{c(){De(e.$$.fragment),l=O(),s=v("br")},l(n){Se(e.$$.fragment,n),l=P(n),s=b(n,"BR",{})},m(n,c){Ae(e,n,c),A(n,l,c),A(n,s,c),r=!0},p(n,c){const h={};!t&&c&1&&(t=!0,h.rating=n[0],Rt(()=>t=!1)),e.$set(h)},i(n){r||(M(e.$$.fragment,n),r=!0)},o(n){H(e.$$.fragment,n),r=!1},d(n){Ue(e,n),n&&f(l),n&&f(s)}}}function Lt(a){let e,t,l,s,r,i,o,n,c,h,p,T,y,q,w;e=new Tt({props:{rating:parseFloat(a[0]),config:a[6]}});function E(d,m){return d[5]?Mt:Yt}let N=E(a),k=N(a);return{c(){De(e.$$.fragment),t=O(),k.c(),l=O(),s=v("div"),r=v("button"),i=C("Review submitted!"),o=O(),n=v("button"),c=C("Edit"),h=O(),p=v("button"),T=C("Delete"),this.h()},l(d){Se(e.$$.fragment,d),t=P(d),k.l(d),l=P(d),s=b(d,"DIV",{class:!0});var m=g(s);r=b(m,"BUTTON",{type:!0,class:!0,style:!0});var D=g(r);i=F(D,"Review submitted!"),D.forEach(f),o=P(m),n=b(m,"BUTTON",{type:!0,class:!0,style:!0});var U=g(n);c=F(U,"Edit"),U.forEach(f),h=P(m),p=b(m,"BUTTON",{type:!0,class:!0,style:!0});var S=g(p);T=F(S,"Delete"),S.forEach(f),m.forEach(f),this.h()},h(){r.disabled=!0,u(r,"type","submit"),u(r,"class","btn btn-success"),X(r,"margin-top","0.5rem"),u(n,"type","submit"),u(n,"class","btn btn-primary"),X(n,"margin-top","0.5rem"),X(n,"margin-left","0.5rem"),u(p,"type","button"),u(p,"class","btn btn-danger"),X(p,"margin-top","0.5rem"),X(p,"margin-left","0.5rem"),u(s,"class","buttons svelte-18qqude")},m(d,m){Ae(e,d,m),A(d,t,m),k.m(d,m),A(d,l,m),A(d,s,m),_(s,r),_(r,i),_(s,o),_(s,n),_(n,c),_(s,h),_(s,p),_(p,T),y=!0,q||(w=[te(r,"click",a[7]),te(n,"click",a[8])],q=!0)},p(d,m){const D={};m&1&&(D.rating=parseFloat(d[0])),e.$set(D),N===(N=E(d))&&k?k.p(d,m):(k.d(1),k=N(d),k&&(k.c(),k.m(l.parentNode,l)))},i(d){y||(M(e.$$.fragment,d),y=!0)},o(d){H(e.$$.fragment,d),y=!1},d(d){Ue(e,d),d&&f(t),k.d(d),d&&f(l),d&&f(s),q=!1,$e(w)}}}function Gt(a){let e,t,l,s,r,i,o,n,c,h,p,T,y,q,w,E,N,k;return{c(){e=v("details"),t=v("summary"),l=C("Include a review?"),s=O(),r=v("textarea"),i=O(),o=v("div"),n=v("div"),c=v("input"),h=O(),p=v("label"),T=C("Spoilers"),q=O(),w=v("button"),E=C("Submit"),this.h()},l(d){e=b(d,"DETAILS",{class:!0});var m=g(e);t=b(m,"SUMMARY",{class:!0});var D=g(t);l=F(D,"Include a review?"),D.forEach(f),s=P(m),r=b(m,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(r).forEach(f),i=P(m),o=b(m,"DIV",{class:!0});var U=g(o);n=b(U,"DIV",{class:!0});var S=g(n);c=b(S,"INPUT",{type:!0,id:!0,name:!0}),h=P(S),p=b(S,"LABEL",{for:!0});var R=g(p);T=F(R,"Spoilers"),R.forEach(f),S.forEach(f),U.forEach(f),m.forEach(f),q=P(d),w=b(d,"BUTTON",{type:!0,class:!0,style:!0});var B=g(w);E=F(B,"Submit"),B.forEach(f),this.h()},h(){u(t,"class","svelte-18qqude"),u(r,"class","form-control"),u(r,"placeholder","Write your review"),u(r,"id","floatingTextarea2"),X(r,"height","150px"),u(c,"type","checkbox"),u(c,"id","spoilers"),u(c,"name","interest"),u(p,"for","music"),u(n,"class","check svelte-18qqude"),u(o,"class","spoilers svelte-18qqude"),e.open=y=!!a[5],u(e,"class","svelte-18qqude"),u(w,"type","submit"),u(w,"class","btn btn-primary"),X(w,"margin-top","0.5rem")},m(d,m){A(d,e,m),_(e,t),_(t,l),_(e,s),_(e,r),Ce(r,a[5]),_(e,i),_(e,o),_(o,n),_(n,c),c.checked=a[2],_(n,h),_(n,p),_(p,T),A(d,q,m),A(d,w,m),_(w,E),N||(k=[te(r,"input",a[14]),te(c,"change",a[15]),te(w,"click",a[7])],N=!0)},p(d,m){m&32&&Ce(r,d[5]),m&4&&(c.checked=d[2]),m&32&&y!==(y=!!d[5])&&(e.open=y)},i:K,o:K,d(d){d&&f(e),d&&f(q),d&&f(w),N=!1,$e(k)}}}function Mt(a){let e,t,l;return{c(){e=v("textarea"),this.h()},l(s){e=b(s,"TEXTAREA",{class:!0,placeholder:!0,id:!0,style:!0}),g(e).forEach(f),this.h()},h(){e.disabled=!0,u(e,"class","form-control"),u(e,"placeholder","Leave a comment here"),u(e,"id","floatingTextarea2"),X(e,"height","100px")},m(s,r){A(s,e,r),Ce(e,a[5]),t||(l=te(e,"input",a[16]),t=!0)},p(s,r){r&32&&Ce(e,s[5])},d(s){s&&f(e),t=!1,l()}}}function Yt(a){let e,t;return{c(){e=v("p"),t=C("You haven't reviewed this game yet"),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"You haven't reviewed this game yet"),s.forEach(f),this.h()},h(){u(e,"class","svelte-18qqude")},m(l,s){A(l,e,s),_(e,t)},p:K,d(l){l&&f(e)}}}function mt(a){let e,t;return{c(){e=v("p"),t=C("This game does not have any reviews yet."),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"This game does not have any reviews yet."),s.forEach(f),this.h()},h(){u(e,"class","svelte-18qqude")},m(l,s){A(l,e,s),_(e,t)},d(l){l&&f(e)}}}function pt(a){let e,t,l=!a[4]&&vt(a);return{c(){l&&l.c(),e=x()},l(s){l&&l.l(s),e=x()},m(s,r){l&&l.m(s,r),A(s,e,r),t=!0},p(s,r){s[4]?l&&(ne(),H(l,1,1,()=>{l=null}),ie()):l?(l.p(s,r),r&16&&M(l,1)):(l=vt(s),l.c(),M(l,1),l.m(e.parentNode,e))},i(s){t||(M(l),t=!0)},o(s){H(l),t=!1},d(s){l&&l.d(s),s&&f(e)}}}function vt(a){let e,t,l=a[3],s=[];for(let i=0;i<l.length;i+=1)s[i]=bt(_t(a,l,i));const r=i=>H(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=x()},l(i){for(let o=0;o<s.length;o+=1)s[o].l(i);e=x()},m(i,o){for(let n=0;n<s.length;n+=1)s[n].m(i,o);A(i,e,o),t=!0},p(i,o){if(o&72){l=i[3];let n;for(n=0;n<l.length;n+=1){const c=_t(i,l,n);s[n]?(s[n].p(c,o),M(s[n],1)):(s[n]=bt(c),s[n].c(),M(s[n],1),s[n].m(e.parentNode,e))}for(ne(),n=l.length;n<s.length;n+=1)r(n);ie()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)M(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)H(s[o]);t=!1},d(i){Ve(s,i),i&&f(e)}}}function Ht(a){let e,t;return{c(){e=v("p"),t=C("No"),this.h()},l(l){e=b(l,"P",{class:!0});var s=g(e);t=F(s,"No"),s.forEach(f),this.h()},h(){u(e,"class","card-text svelte-18qqude")},m(l,s){A(l,e,s),_(e,t)},p:K,i:K,o:K,d(l){l&&f(e)}}}function zt(a){let e,t,l,s=a[5].reviewer+"",r,i,o,n,c,h,p=a[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+a[5].reviewTime.getDate()+" "+a[5].reviewTime.getFullYear(),T,y,q,w;n=new Tt({props:{rating:parseFloat(a[5].rating),config:a[6]}});function E(d,m){return d[5].spoiler?Xt:Qt}let N=E(a),k=N(a);return{c(){e=v("h5"),t=C("Review by "),l=v("a"),r=C(s),o=O(),De(n.$$.fragment),c=O(),h=v("h6"),T=C(p),y=O(),k.c(),q=x(),this.h()},l(d){e=b(d,"H5",{class:!0});var m=g(e);t=F(m,"Review by "),l=b(m,"A",{href:!0,class:!0});var D=g(l);r=F(D,s),D.forEach(f),m.forEach(f),o=P(d),Se(n.$$.fragment,d),c=P(d),h=b(d,"H6",{class:!0});var U=g(h);T=F(U,p),U.forEach(f),y=P(d),k.l(d),q=x(),this.h()},h(){u(l,"href",i=`/user/home/${a[5].reviewer.toLowerCase()}`),u(l,"class","svelte-18qqude"),u(e,"class","card-title"),u(h,"class","card-subtitle mb-2 text-muted")},m(d,m){A(d,e,m),_(e,t),_(e,l),_(l,r),A(d,o,m),Ae(n,d,m),A(d,c,m),A(d,h,m),_(h,T),A(d,y,m),k.m(d,m),A(d,q,m),w=!0},p(d,m){(!w||m&8)&&s!==(s=d[5].reviewer+"")&&Te(r,s),(!w||m&8&&i!==(i=`/user/home/${d[5].reviewer.toLowerCase()}`))&&u(l,"href",i);const D={};m&8&&(D.rating=parseFloat(d[5].rating)),n.$set(D),(!w||m&8)&&p!==(p=d[5].reviewTime.toLocaleString("en-us",{month:"long"})+" "+d[5].reviewTime.getDate()+" "+d[5].reviewTime.getFullYear())&&Te(T,p),N===(N=E(d))&&k?k.p(d,m):(k.d(1),k=N(d),k&&(k.c(),k.m(q.parentNode,q)))},i(d){w||(M(n.$$.fragment,d),w=!0)},o(d){H(n.$$.fragment,d),w=!1},d(d){d&&f(e),d&&f(o),Ue(n,d),d&&f(c),d&&f(h),d&&f(y),k.d(d),d&&f(q)}}}function Qt(a){let e,t=a[5].review+"",l;return{c(){e=v("p"),l=C(t),this.h()},l(s){e=b(s,"P",{class:!0});var r=g(e);l=F(r,t),r.forEach(f),this.h()},h(){u(e,"class","card-text svelte-18qqude")},m(s,r){A(s,e,r),_(e,l)},p(s,r){r&8&&t!==(t=s[5].review+"")&&Te(l,t)},d(s){s&&f(e)}}}function Xt(a){let e,t,l,s,r,i=a[5].review+"",o;return{c(){e=v("details"),t=v("summary"),l=C("This review has spoilers. Click to see"),s=O(),r=v("p"),o=C(i),this.h()},l(n){e=b(n,"DETAILS",{class:!0});var c=g(e);t=b(c,"SUMMARY",{class:!0});var h=g(t);l=F(h,"This review has spoilers. Click to see"),h.forEach(f),s=P(c),r=b(c,"P",{class:!0});var p=g(r);o=F(p,i),p.forEach(f),c.forEach(f),this.h()},h(){u(t,"class","svelte-18qqude"),u(r,"class","card-text svelte-18qqude"),u(e,"class","svelte-18qqude")},m(n,c){A(n,e,c),_(e,t),_(t,l),_(e,s),_(e,r),_(r,o)},p(n,c){c&8&&i!==(i=n[5].review+"")&&Te(o,i)},d(n){n&&f(e)}}}function bt(a){let e,t,l,s,r,i,o,n;const c=[zt,Ht],h=[];function p(T,y){return y&8&&(s=null),s==null&&(s=T[5].reviewer.toLowerCase()!=""),s?0:1}return r=p(a,-1),i=h[r]=c[r](a),{c(){e=v("div"),t=v("div"),l=v("div"),i.c(),o=O(),this.h()},l(T){e=b(T,"DIV",{class:!0});var y=g(e);t=b(y,"DIV",{class:!0,style:!0});var q=g(t);l=b(q,"DIV",{class:!0});var w=g(l);i.l(w),w.forEach(f),q.forEach(f),o=P(y),y.forEach(f),this.h()},h(){u(l,"class","card-body"),u(t,"class","card"),X(t,"width","95%"),X(t,"margin-left","auto"),X(t,"margin-right","auto"),u(e,"class","card-body")},m(T,y){A(T,e,y),_(e,t),_(t,l),h[r].m(l,null),_(e,o),n=!0},p(T,y){let q=r;r=p(T,y),r===q?h[r].p(T,y):(ne(),H(h[q],1,1,()=>{h[q]=null}),ie(),i=h[r],i?i.p(T,y):(i=h[r]=c[r](T),i.c()),M(i,1),i.m(l,null))},i(T){n||(M(i),n=!0)},o(T){H(i),n=!1},d(T){T&&f(e),h[r].d()}}}function Kt(a){let e,t,l,s,r,i,o,n,c,h,p,T,y,q,w,E,N,k=!a[1]&&ht(a);const d=[Gt,Lt],m=[];function D(R,B){return R[1]?1:0}n=D(a),c=m[n]=d[n](a);let U=a[4]&&mt(),S=a[3]&&pt(a);return{c(){e=v("div"),t=v("div"),l=v("h5"),s=C("Rate and Review"),r=O(),k&&k.c(),i=O(),o=v("div"),c.c(),h=O(),p=v("div"),T=v("div"),y=v("h5"),q=C("User reviews"),w=O(),U&&U.c(),E=O(),S&&S.c(),this.h()},l(R){e=b(R,"DIV",{class:!0,style:!0});var B=g(e);t=b(B,"DIV",{class:!0});var I=g(t);l=b(I,"H5",{class:!0});var Y=g(l);s=F(Y,"Rate and Review"),Y.forEach(f),r=P(I),k&&k.l(I),i=P(I),o=b(I,"DIV",{class:!0});var j=g(o);c.l(j),j.forEach(f),I.forEach(f),B.forEach(f),h=P(R),p=b(R,"DIV",{class:!0,style:!0});var L=g(p);T=b(L,"DIV",{class:!0});var G=g(T);y=b(G,"H5",{class:!0});var z=g(y);q=F(z,"User reviews"),z.forEach(f),w=P(G),U&&U.l(G),E=P(G),S&&S.l(G),G.forEach(f),L.forEach(f),this.h()},h(){u(l,"class","card-title"),u(o,"class","form-floating"),u(t,"class","card-body"),u(e,"class","card"),X(e,"width","100%"),X(e,"margin-top","1rem"),u(y,"class","card-title"),u(T,"class","card-body"),u(p,"class","card"),X(p,"width","100%"),X(p,"margin-top","2rem")},m(R,B){A(R,e,B),_(e,t),_(t,l),_(l,s),_(t,r),k&&k.m(t,null),_(t,i),_(t,o),m[n].m(o,null),A(R,h,B),A(R,p,B),_(p,T),_(T,y),_(y,q),_(T,w),U&&U.m(T,null),_(T,E),S&&S.m(T,null),N=!0},p(R,[B]){R[1]?k&&(ne(),H(k,1,1,()=>{k=null}),ie()):k?(k.p(R,B),B&2&&M(k,1)):(k=ht(R),k.c(),M(k,1),k.m(t,i));let I=n;n=D(R),n===I?m[n].p(R,B):(ne(),H(m[I],1,1,()=>{m[I]=null}),ie(),c=m[n],c?c.p(R,B):(c=m[n]=d[n](R),c.c()),M(c,1),c.m(o,null)),R[4]?U||(U=mt(),U.c(),U.m(T,E)):U&&(U.d(1),U=null),R[3]?S?(S.p(R,B),B&8&&M(S,1)):(S=pt(R),S.c(),M(S,1),S.m(T,null)):S&&(ne(),H(S,1,1,()=>{S=null}),ie())},i(R){N||(M(k),M(c),M(S),N=!0)},o(R){H(k),H(c),H(S),N=!1},d(R){R&&f(e),k&&k.d(),m[n].d(),R&&f(h),R&&f(p),U&&U.d(),S&&S.d()}}}function Wt(a,e,t){let{game:l}=e,{uid:s}=e,{name:r}=e,{gamename:i}=e;console.log(r),console.log(s);const o=l;let n=new Date;const c=Je(Ze);let h,p,T=!1,y=!1;const q={showText:!0};async function w(){h>0&&h<=10?(p||t(5,p=""),t(1,T=!0),await Ut(Ee(c,"games",`${o+s}`),{gameId:o,reviewBy:s,review:p,reviewAt:n.getTime(),rating:h,spoiler:y,reviewerName:s.toLowerCase(),gameName:i}),N(s,o,h),D()):alert("Rating must be between 0 and 5!")}function E(){t(1,T=!1)}async function N(I,Y,j){const L=Je(Ze),G=ue(L,"users");let z=ce(G,fe("displayName","==",I));const ve=await de(z);let oe,$;ve.forEach(ee=>{oe=ee.id,$=ee.data().ratings});let ae=!1;for(let ee of $)if(ee.id===Y){ae=!0;const be={};be.id=Y,be.rating=ee.rating;const Ie=$.indexOf(be);$.splice(Ie,1);const ge={};ge.id=Y,ge.rating=parseInt(j),$.push(ge)}if(!ae){const ee={};ee.id=Y,ee.rating=parseInt(j),$.push(ee)}const _e=Ee(L,"users",oe);await Ne(_e,{ratings:$})}async function k(){const I=ue(c,"games");let Y=ce(I,fe("reviewBy","==",s));const j=await de(Y);let L=[];j.forEach(G=>{G.id;let z={};z.id=G.data().gameId,z.review=G.data().review,z.rating=G.data().rating,z.spoiler=G.data().spoiler,L.push(z)});for(let G of L)o===G.id&&(t(1,T=!0),t(5,p=G.review),t(2,y=G.spoiler),t(0,h=G.rating))}k();let d,m=!0;async function D(){const I=ue(c,"games");let Y=ce(I,fe("gameId","==",o));const j=await de(Y);j.empty?t(4,m=!0):t(4,m=!1);let L=[];j.forEach(G=>{G.id;let z={};z.reviewer=G.data().reviewBy,z.review=G.data().review,z.reviewTime=new Date(G.data().reviewAt),z.rating=G.data().rating,z.spoiler=G.data().spoiler,L.push(z)}),t(3,d=L)}D(),D().then(()=>console.log(m));function U(I){h=I,t(0,h)}function S(){p=this.value,t(5,p)}function R(){y=this.checked,t(2,y)}function B(){p=this.value,t(5,p)}return a.$$set=I=>{"game"in I&&t(9,l=I.game),"uid"in I&&t(10,s=I.uid),"name"in I&&t(11,r=I.name),"gamename"in I&&t(12,i=I.gamename)},[h,T,y,d,m,p,q,w,E,l,s,r,i,U,S,R,B]}class Jt extends Fe{constructor(e){super(),Le(this,e,Wt,Kt,Ge,{game:9,uid:10,name:11,gamename:12})}}function gt(a,e,t){const l=a.slice();return l[25]=e[t],l[27]=t,l}function Zt(a,e,t){const l=a.slice();return l[28]=e[t],l[27]=t,l}function $t(a){let e;return{c(){e=v("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,"aria-label":!0}),g(e).forEach(f),this.h()},h(){u(e,"type","button"),u(e,"data-bs-target","#carouselExampleIndicators"),u(e,"data-bs-slide-to",a[27]),u(e,"aria-label",`Screenshot ${a[27]+1}`)},m(t,l){A(t,e,l)},d(t){t&&f(e)}}}function xt(a){let e;return{c(){e=v("button"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,"data-bs-target":!0,"data-bs-slide-to":!0,class:!0,"aria-current":!0,"aria-label":!0}),g(e).forEach(f),this.h()},h(){u(e,"type","button"),u(e,"data-bs-target","#carouselExampleIndicators"),u(e,"data-bs-slide-to",a[27]),u(e,"class","active"),u(e,"aria-current","true"),u(e,"aria-label",`Screenshot ${a[27]+1}`)},m(t,l){A(t,e,l)},d(t){t&&f(e)}}}function el(a){let e;function t(r,i){return r[27]===0?xt:$t}let s=t(a)(a);return{c(){s.c(),e=x()},l(r){s.l(r),e=x()},m(r,i){s.m(r,i),A(r,e,i)},p:K,d(r){s.d(r),r&&f(e)}}}function tl(a){let e,t,l,s;return{c(){e=v("div"),t=v("img"),s=O(),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=g(e);t=b(i,"IMG",{style:!0,src:!0,alt:!0,class:!0}),s=P(i),i.forEach(f),this.h()},h(){X(t,"border-radius","0.5rem"),Et(t.src,l=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[25]}.jpg`)||u(t,"src",l),u(t,"alt",a[6].name),u(t,"class","d-block w-100 svelte-1u2tj57"),u(e,"class","carousel-item")},m(r,i){A(r,e,i),_(e,t),_(e,s)},p:K,d(r){r&&f(e)}}}function ll(a){let e,t,l,s;return{c(){e=v("div"),t=v("img"),s=O(),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=g(e);t=b(i,"IMG",{style:!0,src:!0,alt:!0,class:!0}),s=P(i),i.forEach(f),this.h()},h(){X(t,"border-radius","0.5rem"),Et(t.src,l=`https://images.igdb.com/igdb/image/upload/t_screenshot_big/${a[25]}.jpg`)||u(t,"src",l),u(t,"alt",a[6].name),u(t,"class","d-block w-100 svelte-1u2tj57"),u(e,"class","carousel-item active")},m(r,i){A(r,e,i),_(e,t),_(e,s)},p:K,d(r){r&&f(e)}}}function kt(a){let e;function t(r,i){return r[27]===0?ll:tl}let s=t(a)(a);return{c(){s.c(),e=x()},l(r){s.l(r),e=x()},m(r,i){s.m(r,i),A(r,e,i)},p(r,i){s.p(r,i)},d(r){s.d(r),r&&f(e)}}}function sl(a){let e,t,l,s;return{c(){e=v("strong"),t=v("a"),l=C("Sign In"),s=C(" to log, rate, review and more."),this.h()},l(r){e=b(r,"STRONG",{});var i=g(e);t=b(i,"A",{href:!0,class:!0});var o=g(t);l=F(o,"Sign In"),o.forEach(f),s=F(i," to log, rate, review and more."),i.forEach(f),this.h()},h(){u(t,"href","/profile"),u(t,"class","svelte-1u2tj57")},m(r,i){A(r,e,i),_(e,t),_(t,l),_(e,s)},p:K,i:K,o:K,d(r){r&&f(e)}}}function rl(a){let e,t,l,s,r,i,o,n;function c(E,N){return E[1]?al:nl}let h=c(a),p=h(a);function T(E,N){return E[2]?il:ol}let y=T(a),q=y(a),w=a[4]&&yt(a);return{c(){e=v("div"),p.c(),t=O(),q.c(),l=O(),s=v("p"),r=C(a[0]),i=O(),w&&w.c(),o=x(),this.h()},l(E){e=b(E,"DIV",{class:!0});var N=g(e);p.l(N),t=P(N),q.l(N),l=P(N),s=b(N,"P",{class:!0});var k=g(s);r=F(k,a[0]),k.forEach(f),N.forEach(f),i=P(E),w&&w.l(E),o=x(),this.h()},h(){u(s,"class","error svelte-1u2tj57"),u(e,"class","user-options svelte-1u2tj57")},m(E,N){A(E,e,N),p.m(e,null),_(e,t),q.m(e,null),_(e,l),_(e,s),_(s,r),A(E,i,N),w&&w.m(E,N),A(E,o,N),n=!0},p(E,N){h===(h=c(E))&&p?p.p(E,N):(p.d(1),p=h(E),p&&(p.c(),p.m(e,t))),y===(y=T(E))&&q?q.p(E,N):(q.d(1),q=y(E),q&&(q.c(),q.m(e,l))),(!n||N&1)&&Te(r,E[0]),E[4]?w?(w.p(E,N),N&16&&M(w,1)):(w=yt(E),w.c(),M(w,1),w.m(o.parentNode,o)):w&&(ne(),H(w,1,1,()=>{w=null}),ie())},i(E){n||(M(w),n=!0)},o(E){H(w),n=!1},d(E){E&&f(e),p.d(),q.d(),E&&f(i),w&&w.d(E),E&&f(o)}}}function al(a){let e,t,l,s;return{c(){e=v("button"),t=C("Remove from backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var i=g(e);t=F(i,"Remove from backlog"),i.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class","btn btn-danger svelte-1u2tj57")},m(r,i){A(r,e,i),_(e,t),l||(s=te(e,"click",a[8]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function nl(a){let e,t,l,s;return{c(){e=v("button"),t=C("Add to backlog"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var i=g(e);t=F(i,"Add to backlog"),i.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class","btn btn-primary svelte-1u2tj57")},m(r,i){A(r,e,i),_(e,t),l||(s=te(e,"click",a[7]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function il(a){let e,t,l,s;return{c(){e=v("button"),t=C("Remove from favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var i=g(e);t=F(i,"Remove from favourites"),i.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class","btn btn-danger svelte-1u2tj57")},m(r,i){A(r,e,i),_(e,t),l||(s=te(e,"click",a[10]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function ol(a){let e,t,l,s;return{c(){e=v("button"),t=C("Add to favourites"),this.h()},l(r){e=b(r,"BUTTON",{type:!0,class:!0});var i=g(e);t=F(i,"Add to favourites"),i.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class","btn btn-primary svelte-1u2tj57")},m(r,i){A(r,e,i),_(e,t),l||(s=te(e,"click",a[9]),l=!0)},p:K,d(r){r&&f(e),l=!1,s()}}}function yt(a){let e,t,l=a[5]&&wt(a);return{c(){l&&l.c(),e=x()},l(s){l&&l.l(s),e=x()},m(s,r){l&&l.m(s,r),A(s,e,r),t=!0},p(s,r){s[5]?l?(l.p(s,r),r&32&&M(l,1)):(l=wt(s),l.c(),M(l,1),l.m(e.parentNode,e)):l&&(ne(),H(l,1,1,()=>{l=null}),ie())},i(s){t||(M(l),t=!0)},o(s){H(l),t=!1},d(s){l&&l.d(s),s&&f(e)}}}function wt(a){let e,t;return e=new Jt({props:{game:a[6].id,uid:a[4],name:a[5],gamename:a[6].name}}),{c(){De(e.$$.fragment)},l(l){Se(e.$$.fragment,l)},m(l,s){Ae(e,l,s),t=!0},p(l,s){const r={};s&16&&(r.uid=l[4]),s&32&&(r.name=l[5]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){Ue(e,l)}}}function ul(a){let e,t,l,s,r,i,o,n,c,h,p,T,y,q,w,E,N,k,d,m,D=a[6].name+"",U,S,R,B=a[6].summary+"",I,Y,j,L,G,z,ve,oe,$,ae,_e,ee,be,Ie,ge,Me,ye,Ye,He,ze,Qe,le,se,je,qe,Oe,xe=a[12],he=[];for(let V=0;V<xe.length;V+=1)he[V]=el(Zt(a,xe,V));let we=a[12],W=[];for(let V=0;V<we.length;V+=1)W[V]=kt(gt(a,we,V));const et=[rl,sl],me=[];function tt(V,re){return V[3]?0:1}return le=tt(a),se=me[le]=et[le](a),{c(){e=v("div"),t=v("div"),l=v("div");for(let V=0;V<he.length;V+=1)he[V].c();s=O(),r=v("div");for(let V=0;V<W.length;V+=1)W[V].c();i=O(),o=v("button"),n=v("span"),c=O(),h=v("span"),p=C("Previous"),T=O(),y=v("button"),q=v("span"),w=O(),E=v("span"),N=C("Next"),k=O(),d=v("div"),m=v("h1"),U=C(D),S=O(),R=v("p"),I=C(B),Y=O(),j=v("p"),L=v("span"),G=C("Developers/Publishers"),z=O(),ve=C(a[11]),oe=O(),$=v("br"),ae=O(),_e=v("span"),ee=C("Platform(s)"),be=O(),Ie=C(a[13]),ge=v("br"),Me=O(),ye=v("span"),Ye=C("Genre(s):"),He=O(),ze=C(a[14]),Qe=O(),se.c(),this.h()},l(V){e=b(V,"DIV",{class:!0});var re=g(e);t=b(re,"DIV",{id:!0,class:!0,"data-bs-ride":!0,style:!0});var Q=g(t);l=b(Q,"DIV",{class:!0});var J=g(l);for(let ke=0;ke<he.length;ke+=1)he[ke].l(J);J.forEach(f),s=P(Q),r=b(Q,"DIV",{class:!0});var Re=g(r);for(let ke=0;ke<W.length;ke+=1)W[ke].l(Re);Re.forEach(f),i=P(Q),o=b(Q,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Pe=g(o);n=b(Pe,"SPAN",{class:!0,"aria-hidden":!0}),g(n).forEach(f),c=P(Pe),h=b(Pe,"SPAN",{class:!0});var lt=g(h);p=F(lt,"Previous"),lt.forEach(f),Pe.forEach(f),T=P(Q),y=b(Q,"BUTTON",{class:!0,type:!0,"data-bs-target":!0,"data-bs-slide":!0});var Be=g(y);q=b(Be,"SPAN",{class:!0,"aria-hidden":!0}),g(q).forEach(f),w=P(Be),E=b(Be,"SPAN",{class:!0});var st=g(E);N=F(st,"Next"),st.forEach(f),Be.forEach(f),Q.forEach(f),k=P(re),d=b(re,"DIV",{class:!0});var pe=g(d);m=b(pe,"H1",{class:!0});var rt=g(m);U=F(rt,D),rt.forEach(f),S=P(pe),R=b(pe,"P",{class:!0});var at=g(R);I=F(at,B),at.forEach(f),Y=P(pe),j=b(pe,"P",{class:!0});var Z=g(j);L=b(Z,"SPAN",{class:!0});var nt=g(L);G=F(nt,"Developers/Publishers"),nt.forEach(f),z=P(Z),ve=F(Z,a[11]),oe=P(Z),$=b(Z,"BR",{}),ae=P(Z),_e=b(Z,"SPAN",{class:!0});var it=g(_e);ee=F(it,"Platform(s)"),it.forEach(f),be=P(Z),Ie=F(Z,a[13]),ge=b(Z,"BR",{}),Me=P(Z),ye=b(Z,"SPAN",{class:!0});var ot=g(ye);Ye=F(ot,"Genre(s):"),ot.forEach(f),He=P(Z),ze=F(Z,a[14]),Z.forEach(f),Qe=P(pe),se.l(pe),pe.forEach(f),re.forEach(f),this.h()},h(){u(l,"class","carousel-indicators"),u(r,"class","carousel-inner"),u(n,"class","carousel-control-prev-icon svelte-1u2tj57"),u(n,"aria-hidden","true"),u(h,"class","visually-hidden svelte-1u2tj57"),u(o,"class","carousel-control-prev"),u(o,"type","button"),u(o,"data-bs-target","#carouselExampleControls"),u(o,"data-bs-slide","prev"),u(q,"class","carousel-control-next-icon svelte-1u2tj57"),u(q,"aria-hidden","true"),u(E,"class","visually-hidden svelte-1u2tj57"),u(y,"class","carousel-control-next"),u(y,"type","button"),u(y,"data-bs-target","#carouselExampleControls"),u(y,"data-bs-slide","next"),u(t,"id","carouselExampleControls"),u(t,"class","carousel slide"),u(t,"data-bs-ride","carousel"),X(t,"border-radius","0.5rem"),u(m,"class","svelte-1u2tj57"),u(R,"class","overview svelte-1u2tj57"),u(L,"class","svelte-1u2tj57"),u(_e,"class","svelte-1u2tj57"),u(ye,"class","svelte-1u2tj57"),u(j,"class","svelte-1u2tj57"),u(d,"class","text-container"),u(e,"class","game-info svelte-1u2tj57")},m(V,re){A(V,e,re),_(e,t),_(t,l);for(let Q=0;Q<he.length;Q+=1)he[Q].m(l,null);_(t,s),_(t,r);for(let Q=0;Q<W.length;Q+=1)W[Q].m(r,null);_(t,i),_(t,o),_(o,n),_(o,c),_(o,h),_(h,p),_(t,T),_(t,y),_(y,q),_(y,w),_(y,E),_(E,N),_(e,k),_(e,d),_(d,m),_(m,U),_(d,S),_(d,R),_(R,I),_(d,Y),_(d,j),_(j,L),_(L,G),_(j,z),_(j,ve),_(j,oe),_(j,$),_(j,ae),_(j,_e),_(_e,ee),_(j,be),_(j,Ie),_(j,ge),_(j,Me),_(j,ye),_(ye,Ye),_(j,He),_(j,ze),_(d,Qe),me[le].m(d,null),Oe=!0},p(V,[re]){if(re&4160){we=V[12];let J;for(J=0;J<we.length;J+=1){const Re=gt(V,we,J);W[J]?W[J].p(Re,re):(W[J]=kt(Re),W[J].c(),W[J].m(r,null))}for(;J<W.length;J+=1)W[J].d(1);W.length=we.length}let Q=le;le=tt(V),le===Q?me[le].p(V,re):(ne(),H(me[Q],1,1,()=>{me[Q]=null}),ie(),se=me[le],se?se.p(V,re):(se=me[le]=et[le](V),se.c()),M(se,1),se.m(d,null))},i(V){Oe||(M(se),Nt(()=>{qe&&qe.end(1),je=At(e,ct,{y:50,duration:400,delay:500}),je.start()}),Oe=!0)},o(V){H(se),je&&je.invalidate(),qe=Dt(e,ct,{duration:500}),Oe=!1},d(V){V&&f(e),Ve(he,V),Ve(W,V),me[le].d(),V&&qe&&qe.end()}}}function cl(a,e,t){let{data:l}=e,s=l.searchedGame;const r=Je(),i=jt(Ze);let o="",n,c,h=!1,p,T;i.onAuthStateChanged(function(D){D?(t(3,h=!0),i.currentUser.uid,t(4,p=i.currentUser.displayName)):t(3,h=!1)}),s.id,console.log(s);const y=async()=>{let D=i.currentUser;const U=ue(r,"users");console.log("step 1");let S=ce(U,fe("uid","==",D.uid));console.log("step 2");const R=await de(S);let B,I;R.forEach(j=>{B=j.id,I=j.data().backlog}),console.log([...I,s.id]);const Y=Ee(r,"users",B);await Ne(Y,{backlog:[...I,s.id]}),console.log("all done"),t(1,n=!0)},q=async()=>{let D=i.currentUser;const U=ue(r,"users");let S=ce(U,fe("uid","==",D.uid));const R=await de(S);let B,I;R.forEach(L=>{B=L.id,I=L.data().backlog});const Y=I.indexOf(s.id);I.splice(Y,1);const j=Ee(r,"users",B);await Ne(j,{backlog:I}),console.log("all done"),t(1,n=!1)},w=async()=>{let D=i.currentUser;const U=ue(r,"users");console.log("step 1");let S=ce(U,fe("uid","==",D.uid));console.log("step 2");const R=await de(S);let B,I;if(R.forEach(Y=>{B=Y.id,I=Y.data().favourites}),I.length<=3){console.log([...I,s.id]);const Y=Ee(r,"users",B);await Ne(Y,{favourites:[...I,s.id]}),console.log("all done"),t(2,c=!0)}else t(0,o="You can only favourite 4 games"),setTimeout(()=>{t(0,o=" ")},5e3)},E=async()=>{let D=i.currentUser;const U=ue(r,"users");let S=ce(U,fe("uid","==",D.uid));const R=await de(S);let B,I;R.forEach(L=>{B=L.id,I=L.data().favourites});const Y=I.indexOf(s.id);I.splice(Y,1);const j=Ee(r,"users",B);await Ne(j,{favourites:I}),console.log("all done"),t(2,c=!1)};St(async()=>{i.currentUser,i.onAuthStateChanged(async function(D){if(D){const U=ue(r,"users");let S=ce(U,fe("uid","==",D.uid));const R=await de(S);let B,I,Y;R.forEach(L=>{L.id,B=L.data().backlog,I=L.data().favourites,Y=L.data().played}),B.indexOf(s.id)===-1?(console.log("no tin backlog"),t(1,n=!1)):t(1,n=!0),I.indexOf(s.id)===-1?(console.log("no tin backlog"),t(2,c=!1)):t(2,c=!0),Y.indexOf(s.id)===-1&&console.log("no tin backlog");async function j(){let L=i.currentUser;if(L){const G=ue(r,"users");let z=ce(G,fe("uid","==",L.uid));const ve=await de(z);let oe,$;ve.forEach(ae=>{ae.id,oe=ae.data().displayName,$=ae.data().name}),t(4,p=oe),t(5,T=$)}}return j(),B}})});let N=[];s.screenshots[0].image_id;let k=[];for(let D of s.screenshots)k.push(D.image_id);try{for(let D of s.involved_companies)N.push(" "+D.company.name)}catch{N.push("No companies found.")}let d=[];for(let D of s.platforms)d.push(" "+D.name);let m=[];try{for(let D of s.genres)m.push(" "+D.name)}catch{m.push("No genres found.")}return console.log(s),a.$$set=D=>{"data"in D&&t(15,l=D.data)},[o,n,c,h,p,T,s,y,q,w,E,N,k,d,m,l]}class yl extends Fe{constructor(e){super(),Le(this,e,cl,ul,Ge,{data:15})}}export{yl as default};
